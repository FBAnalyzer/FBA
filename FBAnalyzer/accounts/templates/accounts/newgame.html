<!--

This is the New Game Analysis - html - page content file. It contains all the functionality of game analysis.
It extends app_layout.html with Django

-->

{% extends 'app_layout.html' %}
{% block content %}

<div class="container" style="Padding-top: 40px;">
    <div class="row justify-content-center">
        <div class="col-sm-4">
            <div class="shot-map">
                <canvas id="myCanvas" onmousedown="GetCoordinates()" width="300" height="500"></canvas>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="row justify-content-center">
                <div class="team-selection">
                    <h2>Team 1</h2>
                    <form>
                        <textarea id="home_team" name="hometeam" rows="1" placeholder="Your team name" maxlength="20" wrap="off"></textarea>
                    </form>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="game-clock">
                    <h4 id="periodNr">Period 1</h4>
                    <h2 id="label">00:00:00</h2>
                    <h4 id="gres"><span id="totg_1">0</span> - <span id="totg_2">0</span></h4>
                    <h5 id="gxG">xG <span id="totxG_1">0</span> - <span id="totxG_2">0</span></h5>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="button-input">
                    <p>Team 1 line on court</p>
                    <div class="line-btn btn-group" role="group" aria-label="Line buttons">
                        <button id="L1" type="button" style="background-color: #555555" onclick="Line_change(1)" class="btn btn-secondary">Line 1</button>
                        <button id="L2" type="button" onclick="Line_change(2)" class="btn btn-secondary">Line 2</button>
                        <button id="L3" type="button" onclick="Line_change(3)" class="btn btn-secondary">Line 3</button>
                    </div>
                    <div class="line-btn btn-group-sm" role="group" aria-label="Line buttons">
                        <button id="Pp1" type="button" onclick="Line_change(4)" class="btn btn-secondary">PP 1</button>
                        <button id="Pp2" type="button" onclick="Line_change(5)" class="btn btn-secondary">PP 2</button>
                        <button id="Sh1" type="button" onclick="Line_change(6)" class="btn btn-secondary">SH 1</button>
                        <button id="Sh2" type="button" onclick="Line_change(7)" class="btn btn-secondary">SH 2</button>
                    </div>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="button-input-2">
                    <p>Team 2 line on court</p>
                    <div class="line-btn-2 btn-group" role="group" aria-label="Line buttons Team 2">
                        <button id="L1T2" type="button" style="background-color: #555555" onclick="Line_change_2(1)" class="btn btn-secondary">Line 1</button>
                        <button id="L2T2" type="button" onclick="Line_change_2(2)" class="btn btn-secondary">Line 2</button>
                        <button id="L3T2" type="button" onclick="Line_change_2(3)" class="btn btn-secondary">Line 3</button>
                    </div>
                    <div class="line-btn-2 btn-group-sm" role="group" aria-label="Line buttons Team 2">
                        <button id="Pp1T2" type="button" onclick="Line_change_2(4)" class="btn btn-secondary">PP 1</button>
                        <button id="Pp2T2" type="button" onclick="Line_change_2(5)" class="btn btn-secondary">PP 2</button>
                        <button id="Sh1T2" type="button" onclick="Line_change_2(6)" class="btn btn-secondary">SH 1</button>
                        <button id="Sh2T2" type="button" onclick="Line_change_2(7)" class="btn btn-secondary">SH 2</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="row justify-content-center">
                <div class="team-selection">
                    <h2>Team 2</h2>
                    <form>
                        <textarea id="away_team" name="awayteam" rows="1" placeholder="Opponent team name" maxlength="20" wrap="off"></textarea>
                    </form>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="pos-input">
                    <p>Position</p>
                    {% load static %}
                    <input type="image" id="changeorder" onclick="ChangeOrder()" src="{% static 'change_icon.jpeg' %}" width="30" height="30" alt="order">
                    <div class="pos-btn btn-group-lg" role="group" aria-label="Position buttons">
                        <button id="TeamR" type="button" onclick="BallTeamR()" class="btn btn-secondary">Team 2</button>
                    </div>
                    <div class="pos-btn btn-group-lg" role="group" aria-label="Position buttons">
                        <button id="TeamL" type="button" style="background-color: #555555" onclick="BallTeamL()" class="btn btn-secondary">Team 1</button>
                    </div>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="game-btn" role="group" aria-label="Game buttons">
                    <button id="reset" type="button" onclick="Reset()" disabled="true" class="btn btn-secondary">Reset</button>
                    <button id="start" type="button" onclick="Start()" class="btn btn-secondary btn-lg">Start game</button>
                    <button id="period" type="button" onclick="Period()" disabled="true" class="btn btn-secondary">Period</button>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-3">
            <div id="sL1" class="stats-L1">
                <h4><hr/>Line 1</h4>
                <p style="padding-top: 10px"><b>Possession:</b> <span id="pL1">0</span>% | <span id="pL1g">0</span>%<p/>
                <p>Time on Court: <span id="tocL1">0:00</span> | <span id="tocL1g">0:00</span></p>
                <p>Avg Time on Court: <span id="atocL1">0:00</span> | <span id="atocL1g">0:00</span></p>
                <p>Avg Time w Ball: <span id="avgL1">0:00</span> | <span id="avgL1g">0:00</span></p>
                <p>Avg Time no Ball: <span id="avgnoL1">0:00</span> | <span id="avgnoL1g">0:00</span></p>
                <p><b>Plus minus:</b> <span id="pmL1">0</span> | <span id="pmL1g">0</span></p>
                <p style="padding-top: 10px"><b>Team 1 Shots</b></p>
                <p><b>xG:</b> <span id="xGf_L1">0</span> | <span id="xGf_L1g">0</span></p>
                <p>Shots: <span id="sfL1">0</span> | <span id="sfL1g">0</span></p>
                <p>Blocked: <span id="baL1">0</span> | <span id="baL1g">0</span></p>
                <p>Missed: <span id="mfL1">0</span> | <span id="mfL1g">0</span></p>
                <p>Saved: <span id="safL1">0</span> | <span id="safL1g">0</span></p>
                <p>Goals: <span id="gfL1">0</span> | <span id="gfL1g">0</span></p>
                <p style="padding-top: 10px"><b>Team 2 Shots</b></p>
                <p><b>xG:</b> <span id="xGa_L1">0</span> | <span id="xGa_L1g">0</span></p>
                <p>Shots: <span id="saL1">0</span> | <span id="saL1g">0</span></p>
                <p>Blocked: <span id="bfL1">0</span> | <span id="bfL1g">0</span></p>
                <p>Missed: <span id="maL1">0</span> | <span id="maL1g">0</span></p>
                <p>Saved: <span id="saaL1">0</span> | <span id="saaL1g">0</span></p>
                <p>Goals: <span id="gaL1">0</span> | <span id="gaL1g">0</span></p>
            </div>
        </div>
        <div class="col-sm-3">
            <div id="sL2" class="stats-L2">
                <h4><hr/>Line 2</h4>
                <p style="padding-top: 10px"><b>Possession:</b> <span id="pL2">0</span>% | <span id="pL2g">0</span>%<p/>
                <p>Time on Court: <span id="tocL2">0:00</span> | <span id="tocL2g">0:00</span></p>
                <p>Avg Time on Court: <span id="atocL2">0:00</span> | <span id="atocL2g">0:00</span></p>
                <p>Avg Time w Ball: <span id="avgL2">0:00</span> | <span id="avgL2g">0:00</span></p>
                <p>Avg Time no Ball: <span id="avgnoL2">0:00</span> | <span id="avgnoL2g">0:00</span></p>
                <p><b>Plus minus:</b> <span id="pmL2">0</span> | <span id="pmL2g">0</span></p>
                <p style="padding-top: 10px"><b>Team 1 Shots</b></p>
                <p><b>xG:</b> <span id="xGf_L2">0</span> | <span id="xGf_L2g">0</span></p>
                <p>Shots: <span id="sfL2">0</span> | <span id="sfL2g">0</span></p>
                <p>Blocked: <span id="baL2">0</span> | <span id="baL2g">0</span></p>
                <p>Missed: <span id="mfL2">0</span> | <span id="mfL2g">0</span></p>
                <p>Saved: <span id="safL2">0</span> | <span id="safL2g">0</span></p>
                <p>Goals: <span id="gfL2">0</span> | <span id="gfL2g">0</span></p>
                <p style="padding-top: 10px"><b>Team 2 Shots</b></p>
                <p><b>xG:</b> <span id="xGa_L2">0</span> | <span id="xGa_L2g">0</span></p>
                <p>Shots: <span id="saL2">0</span> | <span id="saL2g">0</span></p>
                <p>Blocked: <span id="bfL2">0</span> | <span id="bfL2g">0</span></p>
                <p>Missed: <span id="maL2">0</span> | <span id="maL2g">0</span></p>
                <p>Saved: <span id="saaL2">0</span> | <span id="saaL2g">0</span></p>
                <p>Goals: <span id="gaL2">0</span> | <span id="gaL2g">0</span></p>
            </div>
        </div>
        <div class="col-sm-3">
            <div id="sL3" class="stats-L3">
                <h4><hr/>Line 3</h4>
                <p style="padding-top: 10px"><b>Possession:</b> <span id="pL3">0</span>% | <span id="pL3g">0</span>%<p/>
                <p>Time on Court: <span id="tocL3">0:00</span> | <span id="tocL3g">0:00</span></p>
                <p>Avg Time on Court: <span id="atocL3">0:00</span> | <span id="atocL3g">0:00</span></p>
                <p>Avg Time w Ball: <span id="avgL3">0:00</span> | <span id="avgL3g">0:00</span></p>
                <p>Avg Time no Ball: <span id="avgnoL3">0:00</span> | <span id="avgnoL3g">0:00</span></p>
                <p><b>Plus minus:</b> <span id="pmL3">0</span> | <span id="pmL3g">0</span></p>
                <p style="padding-top: 10px"><b>Team 1 Shots</b></p>
                <p><b>xG:</b> <span id="xGf_L3">0</span> | <span id="xGf_L3g">0</span></p>
                <p>Shots: <span id="sfL3">0</span> | <span id="sfL3g">0</span></p>
                <p>Blocked: <span id="baL3">0</span> | <span id="baL3g">0</span></p>
                <p>Missed: <span id="mfL3">0</span> | <span id="mfL3g">0</span></p>
                <p>Saved: <span id="safL3">0</span> | <span id="safL3g">0</span></p>
                <p>Goals: <span id="gfL3">0</span> | <span id="gfL3g">0</span></p>
                <p style="padding-top: 10px"><b>Team 2 Shots</b></p>
                <p><b>xG:</b> <span id="xGa_L3">0</span> | <span id="xGa_L3g">0</span></p>
                <p>Shots: <span id="saL3">0</span> | <span id="saL3g">0</span></p>
                <p>Blocked: <span id="bfL3">0</span> | <span id="bfL3g">0</span></p>
                <p>Missed: <span id="maL3">0</span> | <span id="maL3g">0</span></p>
                <p>Saved: <span id="saaL3">0</span> | <span id="saaL3g">0</span></p>
                <p>Goals: <span id="gaL3">0</span> | <span id="gaL3g">0</span></p>
            </div>
        </div>
        <div class="col-sm-3">
            <div id="sTeam" class="stats-Team">
                <h4><hr/>Team</h4>
                <p style="padding-top: 10px"><b>Possession:</b> <span id="pTeam">0</span>% | <span id="pTeamg">0</span>%<p/>
                <p>Time on Court: <span id="tocTeam">0:00</span> | <span id="tocTeamg">0:00</span></p>
                <p>Avg Time on Court: <span id="atocTeam">0:00</span> | <span id="atocTeamg">0:00</span></p>
                <p>Avg Time w Ball: <span id="avgTeam">0:00</span> | <span id="avgTeamg">0:00</span></p>
                <p>Avg Time no Ball: <span id="avgnoTeam">0:00</span> | <span id="avgnoTeamg">0:00</span></p>
                <p><b>Plus minus:</b> <span id="pmTeam">0</span> | <span id="pmTeamg">0</span></p>
                <p style="padding-top: 10px"><b>Team 1 Shots</b></p>
                <p><b>xG:</b> <span id="xGf_Team">0</span> | <span id="xGf_Teamg">0</span></p>
                <p>Shots: <span id="sfTeam">0</span> | <span id="sfTeamg">0</span></p>
                <p>Blocked: <span id="baTeam">0</span> | <span id="baTeamg">0</span></p>
                <p>Missed: <span id="mfTeam">0</span> | <span id="mfTeamg">0</span></p>
                <p>Saved: <span id="safTeam">0</span> | <span id="safTeamg">0</span></p>
                <p>Goals: <span id="gfTeam">0</span> | <span id="gfTeamg">0</span></p>
                <p style="padding-top: 10px"><b>Team 2 Shots</b></p>
                <p><b>xG:</b> <span id="xGa_Team">0</span> | <span id="xGa_Teamg">0</span></p>
                <p>Shots: <span id="saTeam">0</span> | <span id="saTeamg">0</span></p>
                <p>Blocked: <span id="bfTeam">0</span> | <span id="bfTeamg">0</span></p>
                <p>Missed: <span id="maTeam">0</span> | <span id="maTeamg">0</span></p>
                <p>Saved: <span id="saaTeam">0</span> | <span id="saaTeamg">0</span></p>
                <p>Goals: <span id="gaTeam">0</span> | <span id="gaTeamg">0</span></p>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-3">
            <div id="sPP1" class="stats-PP1">
                <h4><hr/>Powerplay 1</h4>
                <p style="padding-top: 10px"><b>Possession:</b> <span id="pPP1">0</span>% | <span id="pPP1g">0</span>%<p/>
                <p>Time on Court: <span id="tocPP1">0:00</span> | <span id="tocPP1g">0:00</span></p>
                <p>Avg Time on Court: <span id="atocPP1">0:00</span> | <span id="atocPP1g">0:00</span></p>
                <p>Avg Time w Ball: <span id="avgPP1">0:00</span> | <span id="avgPP1g">0:00</span></p>
                <p>Avg Time no Ball: <span id="avgnoPP1">0:00</span> | <span id="avgnoPP1g">0:00</span></p>
                <p><b>Plus minus:</b> <span id="pmPP1">0</span> | <span id="pmPP1g">0</span></p>
                <p style="padding-top: 10px"><b>Team 1 Shots</b></p>
                <p><b>xG:</b> <span id="xGf_PP1">0</span> | <span id="xGf_PP1g">0</span></p>
                <p>Shots: <span id="sfPP1">0</span> | <span id="sfPP1g">0</span></p>
                <p>Blocked: <span id="baPP1">0</span> | <span id="baPP1g">0</span></p>
                <p>Missed: <span id="mfPP1">0</span> | <span id="mfPP1g">0</span></p>
                <p>Saved: <span id="safPP1">0</span> | <span id="safPP1g">0</span></p>
                <p>Goals: <span id="gfPP1">0</span> | <span id="gfPP1g">0</span></p>
                <p style="padding-top: 10px"><b>Team 2 Shots</b></p>
                <p><b>xG:</b> <span id="xGa_PP1">0</span> | <span id="xGa_PP1g">0</span></p>
                <p>Shots: <span id="saPP1">0</span> | <span id="saPP1g">0</span></p>
                <p>Blocked: <span id="bfPP1">0</span> | <span id="bfPP1g">0</span></p>
                <p>Missed: <span id="maPP1">0</span> | <span id="maPP1g">0</span></p>
                <p>Saved: <span id="saaPP1">0</span> | <span id="saaPP1g">0</span></p>
                <p>Goals: <span id="gaPP1">0</span> | <span id="gaPP1g">0</span></p>
            </div>
        </div>
        <div class="col-sm-3">
            <div id="sPP2" class="stats-PP2">
                <h4><hr/>Powerplay 2</h4>
                <p style="padding-top: 10px"><b>Possession:</b> <span id="pPP2">0</span>% | <span id="pPP2g">0</span>%<p/>
                <p>Time on Court: <span id="tocPP2">0:00</span> | <span id="tocPP2g">0:00</span></p>
                <p>Avg Time on Court: <span id="atocPP2">0:00</span> | <span id="atocPP2g">0:00</span></p>
                <p>Avg Time w Ball: <span id="avgPP2">0:00</span> | <span id="avgPP2g">0:00</span></p>
                <p>Avg Time no Ball: <span id="avgnoPP2">0:00</span> | <span id="avgnoPP2g">0:00</span></p>
                <p><b>Plus minus:</b> <span id="pmPP2">0</span> | <span id="pmPP2g">0</span></p>
                <p style="padding-top: 10px"><b>Team 1 Shots</b></p>
                <p><b>xG:</b> <span id="xGf_PP2">0</span> | <span id="xGf_PP2g">0</span></p>
                <p>Shots: <span id="sfPP2">0</span> | <span id="sfPP2g">0</span></p>
                <p>Blocked: <span id="baPP2">0</span> | <span id="baPP2g">0</span></p>
                <p>Missed: <span id="mfPP2">0</span> | <span id="mfPP2g">0</span></p>
                <p>Saved: <span id="safPP2">0</span> | <span id="safPP2g">0</span></p>
                <p>Goals: <span id="gfPP2">0</span> | <span id="gfPP2g">0</span></p>
                <p style="padding-top: 10px"><b>Team 2 Shots</b></p>
                <p><b>xG:</b> <span id="xGa_PP2">0</span> | <span id="xGa_PP2g">0</span></p>
                <p>Shots: <span id="saPP2">0</span> | <span id="saPP2g">0</span></p>
                <p>Blocked: <span id="bfPP2">0</span> | <span id="bfPP2g">0</span></p>
                <p>Missed: <span id="maPP2">0</span> | <span id="maPP2g">0</span></p>
                <p>Saved: <span id="saaPP2">0</span> | <span id="saaPP2g">0</span></p>
                <p>Goals: <span id="gaPP2">0</span> | <span id="gaPP2g">0</span></p>
            </div>
        </div>
        <div class="col-sm-3">
            <div id="sSH1" class="stats-SH1">
                <h4><hr/>Shorthanded 1</h4>
                <p style="padding-top: 10px"><b>Possession:</b> <span id="pSH1">0</span>% | <span id="pSH1g">0</span>%<p/>
                <p>Time on Court: <span id="tocSH1">0:00</span> | <span id="tocSH1g">0:00</span></p>
                <p>Avg Time on Court: <span id="atocSH1">0:00</span> | <span id="atocSH1g">0:00</span></p>
                <p>Avg Time w Ball: <span id="avgSH1">0:00</span> | <span id="avgSH1g">0:00</span></p>
                <p>Avg Time no Ball: <span id="avgnoSH1">0:00</span> | <span id="avgnoSH1g">0:00</span></p>
                <p><b>Plus minus:</b> <span id="pmSH1">0</span> | <span id="pmSH1g">0</span></p>
                <p style="padding-top: 10px"><b>Team 1 Shots</b></p>
                <p><b>xG:</b> <span id="xGf_SH1">0</span> | <span id="xGf_SH1g">0</span></p>
                <p>Shots: <span id="sfSH1">0</span> | <span id="sfSH1g">0</span></p>
                <p>Blocked: <span id="baSH1">0</span> | <span id="baSH1g">0</span></p>
                <p>Missed: <span id="mfSH1">0</span> | <span id="mfSH1g">0</span></p>
                <p>Saved: <span id="safSH1">0</span> | <span id="safSH1g">0</span></p>
                <p>Goals: <span id="gfSH1">0</span> | <span id="gfSH1g">0</span></p>
                <p style="padding-top: 10px"><b>Team 2 Shots</b></p>
                <p><b>xG:</b> <span id="xGa_SH1">0</span> | <span id="xGa_SH1g">0</span></p>
                <p>Shots: <span id="saSH1">0</span> | <span id="saSH1g">0</span></p>
                <p>Blocked: <span id="bfSH1">0</span> | <span id="bfSH1g">0</span></p>
                <p>Missed: <span id="maSH1">0</span> | <span id="maSH1g">0</span></p>
                <p>Saved: <span id="saaSH1">0</span> | <span id="saaSH1g">0</span></p>
                <p>Goals: <span id="gaSH1">0</span> | <span id="gaSH1g">0</span></p>
            </div>
        </div>
        <div class="col-sm-3">
            <div id="sSH2" class="stats-SH2">
                <h4><hr/>Shorthanded 2</h4>
                <p style="padding-top: 10px"><b>Possession:</b> <span id="pSH2">0</span>% | <span id="pSH2g">0</span>%<p/>
                <p>Time on Court: <span id="tocSH2">0:00</span> | <span id="tocSH2g">0:00</span></p>
                <p>Avg Time on Court: <span id="atocSH2">0:00</span> | <span id="atocSH2g">0:00</span></p>
                <p>Avg Time w Ball: <span id="avgSH2">0:00</span> | <span id="avgSH2g">0:00</span></p>
                <p>Avg Time no Ball: <span id="avgnoSH2">0:00</span> | <span id="avgnoSH2g">0:00</span></p>
                <p><b>Plus minus:</b> <span id="pmSH2">0</span> | <span id="pmSH2g">0</span></p>
                <p style="padding-top: 10px"><b>Team 1 Shots</b></p>
                <p><b>xG:</b> <span id="xGf_SH2">0</span> | <span id="xGf_SH2g">0</span></p>
                <p>Shots: <span id="sfSH2">0</span> | <span id="sfSH2g">0</span></p>
                <p>Blocked: <span id="baSH2">0</span> | <span id="baSH2g">0</span></p>
                <p>Missed: <span id="mfSH2">0</span> | <span id="mfSH2g">0</span></p>
                <p>Saved: <span id="safSH2">0</span> | <span id="safSH2g">0</span></p>
                <p>Goals: <span id="gfSH2">0</span> | <span id="gfSH2g">0</span></p>
                <p style="padding-top: 10px"><b>Team 2 Shots</b></p>
                <p><b>xG:</b> <span id="xGa_SH2">0</span> | <span id="xGa_SH2g">0</span></p>
                <p>Shots: <span id="saSH2">0</span> | <span id="saSH2g">0</span></p>
                <p>Blocked: <span id="bfSH2">0</span> | <span id="bfSH2g">0</span></p>
                <p>Missed: <span id="maSH2">0</span> | <span id="maSH2g">0</span></p>
                <p>Saved: <span id="saaSH2">0</span> | <span id="saaSH2g">0</span></p>
                <p>Goals: <span id="gaSH2">0</span> | <span id="gaSH2g">0</span></p>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div id="posTeam_chart" style="height: 300px"></div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div id="xGTeam_chart" style="height: 300px"></div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div id="xGL1_chart" style="height: 300px"></div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div id="xGL2_chart" style="height: 300px"></div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div id="xGL3_chart" style="height: 300px"></div>
        </div>
    </div>
</div>

<div id="shotmenu" class="shot-menu">
  <ul class="menu-options">
    <li class="menu-option" onclick="shotMissed()">Missed</li>
    <li class="menu-option" onclick="shotSaved()">Saved</li>
    <li class="menu-option" onclick="shotBlocked()">Blocked</li>
    <li class="menu-option" onclick="shotGoal()">Goal</li>
  </ul>
</div>

<div id="shottype" class="shot-type">
  <ul class="menu-options">
    <li class="menu-option" onclick="shotTurnover()">Turnover</li>
    <li class="menu-option" onclick="shotOnetimer()">One-timer</li>
    <li class="menu-option" onclick="shotRebound()">Rebound</li>
    <li class="menu-option" onclick="shotDirect()">Direct</li>
  </ul>
</div>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript" src="/static/js/variables.js"></script>

<!-- The JavaScript - code that describes the game analysis functionality -->

<!--<script> -->
<script type="text/javascript">

    // Variables



    // Load and draw the shot map image when the html-page is loaded
    window.onload = function() {
    var ctx = cnvs.getContext("2d");
    ctx.drawImage(myImg,0,0,fWidth,fLength);
    }

    // When the change team order button is changed, the teams switch sides
    function ChangeOrder() {
        if (Order == 1) { // Team 1 is moved as the upper one, defence zone is up
            document.getElementById("TeamL").innerHTML = "Team 2";
            document.getElementById("TeamR").innerHTML = "Team 1";
            Order = 2;
        }
        else { // Team 1 is moved as the bottom one, defence zone is down
            document.getElementById("TeamL").innerHTML = "Team 1";
            document.getElementById("TeamR").innerHTML = "Team 2";
            Order = 1;
        }
    }

    // When the ball team left button is pressed the button colors and the variable are changed
    // If game is on, them one number is added to number of times with ball
    function BallTeamL() {
        document.getElementById("TeamR").style.background='#4CAF50';
        document.getElementById("TeamL").style.background='#555555';
        if (Order == 1) {
            Ball_pos = 1;
            if (started == 1 && PosTime > 0) {
                Not_p[line_on - 1]++;
                Not_g[line_on - 1]++;
                if (line_on < 4) {
                    Not_p[7]++;
                    Not_g[7]++;
                }
            }
            PosTime = 0;

        } else {
            Ball_pos = 2;
            if (started == 1 && PosTime > 0) {
                Notno_p[line_on - 1]++;
                Notno_g[line_on - 1]++;
                if (line_on < 4) {
                    Notno_p[7]++;
                    Notno_g[7]++;
                }
            }
            PosTime = 0;
        }
    }

    // When the ball team right button is pressed
    function BallTeamR() {
        document.getElementById("TeamR").style.background='#555555';
        document.getElementById("TeamL").style.background='#4CAF50';
        if (Order == 1) {
            Ball_pos = 2;
            if (started == 1 && PosTime > 0) {
                Notno_p[line_on - 1]++;
                Notno_g[line_on - 1]++;
                if (line_on < 4) {
                    Notno_p[7]++;
                    Notno_g[7]++;
                }
            }
            PosTime = 0;
        }

        else {
            Ball_pos = 1;
            if (started == 1 && PosTime > 0) {
                Not_p[line_on - 1]++;
                Not_g[line_on - 1]++;
                if (line_on < 4) {
                    Not_p[7]++;
                    Not_g[7]++;
                }
            }
            PosTime = 0;
        }
    }

    // When the line is changed by pressing any of the line on court buttons except the one that is on
    function Line_change(line) {
        console.log(lines); // debugging
        document.getElementById(lines[line_on-1]).style.background='#4CAF50';
        document.getElementById(lines[line-1]).style.background='#555555';
        old_line = line_on;
        line_on = line;
        if (LineTime > 0) {
            if (Ball_pos == 1) {
                Not_p[line_on - 1]++;
                Not_g[line_on - 1]++;
                if (line_on < 4) {
                    Not_p[7]++;
                    Not_g[7]++;
                }
            }
            if (Ball_pos == 2) {
                Notno_p[line_on - 1]++;
                Notno_g[line_on - 1]++;
                if (line_on < 4) {
                    Notno_p[7]++;
                    Notno_g[7]++;
                }
            }
            Nos_p[line_on - 1]++;
            Nos_g[line_on - 1]++;
            if (line_on < 4) {
                Nos_p[7]++;
                Nos_g[7]++;
            }

            if (old_line == 1) {
                shiftP = Math.round(100 * shiftPos / LineTime);
                posT = Pos_g[0] + Pos_g[1] + Pos_g[2] + Pos_g[3] + Pos_g[4] + Pos_g[5] + Pos_g[6];
                teamPos = Math.round(100 * posT / gameCounter);
                Math.round(100 * Pos_p[line_on - 1] / Toc_p[line_on - 1]);

                posTeam_array.push([shiftNo, shiftP, 0, 0, 0, 0, teamPos]);
            }
            if (old_line == 2) {
                shiftP = Math.round(100 * shiftPos / LineTime);
                posT = Pos_g[0] + Pos_g[1] + Pos_g[2] + Pos_g[3] + Pos_g[4] + Pos_g[5] + Pos_g[6];
                teamPos = Math.round(100 * posT / gameCounter);
                Math.round(100 * Pos_p[line_on - 1] / Toc_p[line_on - 1]);

                posTeam_array.push([shiftNo, 0, shiftP, 0, 0, 0, teamPos]);
            }
            if (old_line == 3) {
                shiftP = Math.round(100 * shiftPos / LineTime);
                posT = Pos_g[0] + Pos_g[1] + Pos_g[2] + Pos_g[3] + Pos_g[4] + Pos_g[5] + Pos_g[6];
                teamPos = Math.round(100 * posT / gameCounter);
                Math.round(100 * Pos_p[line_on - 1] / Toc_p[line_on - 1]);

                posTeam_array.push([shiftNo, 0, 0, shiftP, 0, 0, teamPos]);
            }
            if (old_line == 4 || old_line == 5) {
                shiftP = Math.round(100 * shiftPos / LineTime);
                posT = Pos_g[0] + Pos_g[1] + Pos_g[2] + Pos_g[3] + Pos_g[4] + Pos_g[5] + Pos_g[6];
                teamPos = Math.round(100 * posT / gameCounter);
                Math.round(100 * Pos_p[line_on - 1] / Toc_p[line_on - 1]);

                posTeam_array.push([shiftNo, 0, 0, 0, shiftP, 0, teamPos]);
            }
            if (old_line == 6 || old_line == 7) {
                shiftP = Math.round(100 * shiftPos / LineTime);
                posT = Pos_g[0] + Pos_g[1] + Pos_g[2] + Pos_g[3] + Pos_g[4] + Pos_g[5] + Pos_g[6];
                teamPos = Math.round(100 * posT / gameCounter);
                Math.round(100 * Pos_p[line_on - 1] / Toc_p[line_on - 1]);

                posTeam_array.push([shiftNo, 0, 0, 0, 0, shiftP, teamPos]);
            }
        }
        console.log("Shift Possession: " + shiftP);
        console.log("Team Possession: " + teamPos);
        PosTime = 0;
        LineTime = 0;
        shiftNo++;
        shiftPos = 0;
        console.log(line_on); // debugging
    }
    // Start game or start/stop game clock
    function Start() {
        // If the game has not started
        if (started == 0) {   // Start game and disable teams etc.
            var r = confirm("Do you want to start the game,\n changing teams will be disabled?");
            if (r == true) {
                document.getElementById("home_team").disabled = true;
                document.getElementById("away_team").disabled = true;
                document.getElementById("period").disabled = false;
                document.getElementById("reset").disabled = false;
                started = 1;
                sData.style.display = "block";
            } else {
            }
        }
        // Game has already started, then start/stop the game clock
        else {
            if (is_on == 0) {    // Start game clock
                if (counter == 0 && Ball_pos == 1) {
                    Not_p[line_on - 1]++;
                    Not_g[line_on - 1]++;
                    if (line_on < 4) {
                        Not_p[7]++;
                        Not_g[7]++;
                    }
                }
                if (counter == 0 && Ball_pos == 2) {
                    Notno_p[line_on - 1]++;
                    Notno_g[line_on - 1]++;
                    if (line_on < 4) {
                        Notno_p[7]++;
                        Notno_g[7]++;
                    }
                }
                if (counter == 0) {
                    Nos_p[line_on - 1]++;
                    Nos_g[line_on - 1]++;
                    if (line_on < 4) {
                        Nos_p[7]++;
                        Nos_g[7]++;
                    }
                }
                document.getElementById("start").innerHTML = "Stop";
                document.getElementById("start").style.background='#555555';
                is_on = 1;
                Counter();
            }
            else if (is_on == 1) {  // Stop game clock
                document.getElementById("start").innerHTML = "Start";
                document.getElementById("start").style.background='#4CAF50';
                is_on = 0;
                drawChart(); // Update charts
            }
        }
    }
    // Press the Reset button
    function Reset() {

    }
    // Press the Period button
    function Period() {
        var r = confirm("Changing period will reset clock and statistics,\nand save data, are you sure?");
            if (r == true) {
                periodN++
                counter = 0;
                document.getElementById("periodNr").innerHTML = "Period " + periodN;
                document.getElementById("label").innerHTML = "00:00:00";

                var ctx = cnvs.getContext("2d");
                ctx.drawImage(myImg,0,0,fWidth,fLength);
                PosTime = 0;
                LineTime = 0;
                dataShot = 0;
                dataRes = 0;
                dataxG = 0;
                shiftPos = 0;

                for (let i = 0; i < 8; i++) {

                    sf_p[i].innerHTML = 0;
                    sa_p[i].innerHTML = 0;
                    gf_p[i].innerHTML = 0;
                    ga_p[i].innerHTML = 0;
                    pm_p[i].innerHTML = 0;
                    bf_p[i].innerHTML = 0;
                    ba_p[i].innerHTML = 0;
                    mf_p[i].innerHTML = 0;
                    ma_p[i].innerHTML = 0;
                    saf_p[i].innerHTML = 0;
                    saa_p[i].innerHTML = 0;
                    xf_p[i].innerHTML = 0;
                    xa_p[i].innerHTML = 0;

                    Pos_p[i] = 0;
                    Toc_p[i] = 0;
                    xGf_p[i] = 0;
                    xGa_p[i] = 0;
                    Not_p[i] = 0;
                    Nos_p[i] = 0;
                    Notno_p[i] = 0;

                    p_p[i].innerHTML = 0;
                    toc_p[i].innerHTML = "00:00";
                    atoc_p[i].innerHTML = "00:00";
                    avg_p[i].innerHTML = "00:00";
                    avgno_p[i].innerHTML = "00:00";
                }

            } else {
            }
    }
    function Counter() {
        t = setTimeout(function(){ Count() }, 1000);
    }

    function Count() {
         if (is_on == 1) {

             Toc_p[line_on - 1]++;
             Toc_g[line_on - 1]++;
             if (line_on < 4) {
                 Toc_p[7]++;
                 Toc_g[7]++;
             }

             if (Ball_pos == 1) {
                Pos_p[line_on - 1]++;
                Pos_g[line_on - 1]++;
                shiftPos++;
                if (line_on < 4) {
                    Pos_g[7]++;
                    Pos_p[7]++;
                }

             }
             else {

             }

             // Possession

             p_p[line_on - 1].innerHTML = Math.round(100 * Pos_p[line_on - 1] / Toc_p[line_on - 1]);
             p_p[7].innerHTML = Math.round(100 * Pos_p[7] / (Toc_p[0] + Toc_p[1] + Toc_p[2]));
             
             p_g[line_on - 1].innerHTML = Math.round(100 * Pos_g[line_on - 1] / Toc_g[line_on - 1]);
             p_g[7].innerHTML = Math.round(100 * Pos_g[7] / (Toc_g[0] + Toc_g[1] + Toc_g[2]));

             // Time on Court

             var toc = new Date(Toc_p[line_on - 1] * 1000);
             var d = toc.toISOString().substr(14, 5);
             toc_p[line_on - 1].innerHTML = d;
             
             var toc = new Date(Toc_g[line_on - 1] * 1000);
             var d = toc.toISOString().substr(14, 5);
             toc_g[line_on - 1].innerHTML = d;

             var toc = new Date(Toc_p[7] * 1000);
             var d = toc.toISOString().substr(14, 5);
             toc_p[7].innerHTML = d;

             var toc = new Date(Toc_g[7] * 1000);
             var d = toc.toISOString().substr(14, 5);
             toc_g[7].innerHTML = d;

             // Average Time on Ball

             if (Not_p[line_on - 1] > 0) {
                var avg = new Date(Math.round(Pos_p[line_on - 1] / Not_p[line_on - 1]) * 1000);
                var a = avg.toISOString().substr(14, 5);
                avg_p[line_on - 1].innerHTML = a;
             }
             if (Not_p[7] > 0) {
                var avg = new Date(Math.round(Pos_p[7] / Not_p[7]) * 1000);
                var a = avg.toISOString().substr(14, 5);
                avg_p[7].innerHTML = a;
             }
             if (Not_g[line_on - 1] > 0) {
                var avg = new Date(Math.round(Pos_g[line_on - 1] / Not_g[line_on - 1]) * 1000);
                var a = avg.toISOString().substr(14, 5);
                avg_g[line_on - 1].innerHTML = a;
             }
             if (Not_g[7] > 0) {
                var avg = new Date(Math.round(Pos_g[7] / Not_g[7]) * 1000);
                var a = avg.toISOString().substr(14, 5);
                avg_g[7].innerHTML = a;
             }

             // Average Time without Ball

             if (Notno_p[line_on - 1] > 0) {
                var avg = new Date(Math.round((Toc_p[line_on - 1] - Pos_p[line_on - 1]) / Notno_p[line_on - 1]) * 1000);
                var a = avg.toISOString().substr(14, 5);
                avgno_p[line_on - 1].innerHTML = a;
             }
             if (Notno_p[7] > 0) {
                var avg = new Date(Math.round((Toc_p[7] - Pos_p[7]) / Notno_p[7]) * 1000);
                var a = avg.toISOString().substr(14, 5);
                avgno_p[7].innerHTML = a;
             }
             if (Notno_g[line_on - 1] > 0) {
                var avg = new Date(Math.round((Toc_g[line_on - 1] - Pos_g[line_on - 1]) / Notno_g[line_on - 1]) * 1000);
                var a = avg.toISOString().substr(14, 5);
                avgno_g[line_on - 1].innerHTML = a;
             }
             if (Notno_g[7] > 0) {
                var avg = new Date(Math.round((Toc_g[7] - Pos_g[7]) / Notno_g[7]) * 1000);
                var a = avg.toISOString().substr(14, 5);
                avgno_g[7].innerHTML = a;
             }

             // Average Time on Court

             if (Nos_p[line_on - 1] > 0) {
                var avg = new Date(Math.round(Toc_p[line_on - 1] / Nos_p[line_on - 1]) * 1000);
                var a = avg.toISOString().substr(14, 5);
                atoc_p[line_on - 1].innerHTML = a;
             }
             if (Nos_p[7] > 0) {
                var avg = new Date(Math.round(Toc_p[7] / Nos_p[7]) * 1000);
                var a = avg.toISOString().substr(14, 5);
                atoc_p[7].innerHTML = a;
             }
             if (Nos_g[line_on - 1] > 0) {
                var avg = new Date(Math.round(Toc_g[line_on - 1] / Nos_g[line_on - 1]) * 1000);
                var a = avg.toISOString().substr(14, 5);
                atoc_g[line_on - 1].innerHTML = a;
             }
             if (Nos_g[7] > 0) {
                var avg = new Date(Math.round(Toc_g[7] / Nos_g[7]) * 1000);
                var a = avg.toISOString().substr(14, 5);
                atoc_g[7].innerHTML = a;
             }

             // Add one row to timeData - array
             timeData.push([gameCounter, Ball_pos, line_on, dataShot, dataRes, dataxG]);

             // Add one row to the xG arrays every minute
             if (gameCounter % 60 == 0) {

                 var date = new Date(gameCounter * 1000);
                 var display = date.toISOString().substr(11, 8);
                 xGTeam_array.push([display, xGf_g[7], xGa_g[7], 0, 0]);
                 xGL1_array.push([display, xGf_g[0], xGa_g[0], 0, 0]);
                 xGL2_array.push([display, xGf_g[1], xGa_g[1], 0, 0]);
                 xGL3_array.push([display, xGf_g[2], xGa_g[2], 0, 0]);
             }

             dataShot = 0;
             dataRes = 0;
             dataxG = 0;

             counter++;
             gameCounter++;
             PosTime++;
             LineTime++;
             
             var date = new Date(counter * 1000);
             var display = date.toISOString().substr(11, 8);
             document.getElementById("label").innerHTML = display;

             t = setTimeout(function(){ Count() }, 1000);
         }
    }

    function FindPosition(oElement)
    {
      if(typeof( oElement.offsetParent ) != "undefined")
      {
        for(var posX = 0, posY = 0; oElement; oElement = oElement.offsetParent)
        {
          posX += oElement.offsetLeft;
          posY += oElement.offsetTop;
        }
          return [ posX, posY ];
        }
        else
        {
          return [ oElement.x, oElement.y ];
        }
    }

    function GetCoordinates(e)
    {
        var ImgPos;
        ImgPos = FindPosition(cnvs);
        if (!e) var e = window.event;
        if (e.pageX || e.pageY)
        {
        PosX = e.pageX;
        PosY = e.pageY;
        }
        else if (e.clientX || e.clientY)
        {
          PosX = e.clientX + document.body.scrollLeft
            + document.documentElement.scrollLeft;
          PosY = e.clientY + document.body.scrollTop
            + document.documentElement.scrollTop;
        }

        stype.style.display = "block";
        if (PosY <= 4*fLength/5)
        {
            stype.style.top = PosY + "px";
        }
        else
        {
            stype.style.top = (PosY-(fLength/4)) + "px";
        }
        stype.style.left = PosX + "px";

        PosX = PosX - ImgPos[0];
        PosY = PosY - ImgPos[1];
    }

    function shotMissed() {
        Draw(PosX,PosY,1);
    }

    function shotBlocked() {
        Draw(PosX,PosY,3);
    }

    function shotSaved() {
        Draw(PosX,PosY,2);

        var dx = PosX / fWidth;
        var dy = PosY / fLength;

        if (Order == 1 && Ball_pos == 1) { // Team 1 shot, Team 1 lower side

            if (dy < 0.5) { // Ball on the attack zone
                var dxG = xG_matrix[Math.floor(dy*2*14)][Math.floor(dx*13)] / 100;

                if (dataType == 1) { // turnover x 1,25 xG
                    dxG = dxG * 1.25;
                }
                if (dataType == 2) { // onetimer x 1,5 xG
                    dxG = dxG * 1.5;
                }
                if (dataType == 3) { // rebound x 1,1 xG
                    dxG = dxG * 1.1;
                }
                if (dataType == 4) { //direct x 0,85 xg
                    dxG = dxG * 0.85;
                }

                xGf_p[line_on - 1] = Math.round((xGf_p[line_on - 1] + dxG) * 100) / 100;
                if (line_on < 4) {
                    xGf_p[7] = Math.round((xGf_p[7] + dxG) * 100) / 100;
                }
                xGf_g[line_on - 1] = Math.round((xGf_g[line_on - 1] + dxG) * 100) / 100;
                if (line_on < 4) {
                    xGf_g[7]= Math.round((xGf_g[7] + dxG) * 100) / 100;
                }

                xf_p[line_on - 1].innerHTML = xGf_p[line_on - 1];
                if (line_on < 4) {
                    xf_p[7].innerHTML = xGf_p[7];
                }
                xf_g[line_on - 1].innerHTML = xGf_g[line_on - 1];;
                if (line_on < 4) {
                    xf_g[7].innerHTML = xGf_g[7];
                }
                dataxG = dxG;
                var date = new Date(gameCounter * 1000);
                var display = date.toISOString().substr(11, 8);
                xGTeam_array.push([display, xGf_g[7], xGa_g[7], 0, 0]);
                xGL1_array.push([display, xGf_g[0], xGa_g[0], 0, 0]);
                xGL2_array.push([display, xGf_g[1], xGa_g[1], 0, 0]);
                xGL3_array.push([display, xGf_g[2], xGa_g[2], 0, 0]);

                b = Number(txG_1.innerHTML);
                a = Math.round((b + dxG) * 100) / 100;
                txG_1.innerHTML = a;
            }
        }

        if (Order == 2 && Ball_pos == 1) { // Team 1 shot, Team 1 upper side

            if (dy > 0.5) { // Ball on the attack zone
                var dxG = xG_matrix[13-Math.floor((dy-0.5)*2*13)][12-Math.floor(dx*12)] / 100;

                if (dataType == 1) { // turnover x 1,25 xG
                    dxG = dxG * 1.25;
                }
                if (dataType == 2) { // onetimer x 1,5 xG
                    dxG = dxG * 1.5;
                }
                if (dataType == 3) { // rebound x 1,1 xG
                    dxG = dxG * 1.1;
                }
                if (dataType == 4) { //direct x 0,85 xg
                    dxG = dxG * 0.85;
                }

                xGf_p[line_on - 1] = Math.round((xGf_p[line_on - 1] + dxG) * 100) / 100;
                if (line_on < 4) {
                    xGf_p[7] = Math.round((xGf_p[7] + dxG) * 100) / 100;
                }
                xGf_g[line_on - 1] = Math.round((xGf_g[line_on - 1] + dxG) * 100) / 100;
                if (line_on < 4) {
                    xGf_g[7]= Math.round((xGf_g[7] + dxG) * 100) / 100;
                }
                xf_p[line_on - 1].innerHTML = xGf_p[line_on - 1];
                if (line_on < 4) {
                    xf_p[7].innerHTML = xGf_p[7];
                }
                xf_g[line_on - 1].innerHTML = xGf_g[line_on - 1];
                if (line_on < 4) {
                    xf_g[7].innerHTML = xGf_g[7];
                }
                dataxG = dxG;
                var date = new Date(gameCounter * 1000);
                var display = date.toISOString().substr(11, 8);
                xGTeam_array.push([display, xGf_g[7], xGa_g[7], 0, 0]);
                xGL1_array.push([display, xGf_g[0], xGa_g[0], 0, 0]);
                xGL2_array.push([display, xGf_g[1], xGa_g[1], 0, 0]);
                xGL3_array.push([display, xGf_g[2], xGa_g[2], 0, 0]);

                b = Number(txG_1.innerHTML);
                a = Math.round((b + dxG) * 100) / 100;
                txG_1.innerHTML = a;
            }
        }

        if (Order == 1 && Ball_pos == 2) { // Team 2 shot, Team 2 upper side

            if (dy > 0.5) { // Ball on the attack zone
                var dxG = xG_matrix[13-Math.floor((dy-0.5)*2*13)][12-Math.floor(dx*12)] / 100;

                if (dataType == 1) { // turnover x 1,25 xG
                    dxG = dxG * 1.25;
                }
                if (dataType == 2) { // onetimer x 1,5 xG
                    dxG = dxG * 1.5;
                }
                if (dataType == 3) { // rebound x 1,1 xG
                    dxG = dxG * 1.1;
                }
                if (dataType == 4) { //direct x 0,85 xg
                    dxG = dxG * 0.85;
                }

                xGa_p[line_on - 1] = Math.round((xGa_p[line_on - 1] + dxG) * 100) / 100;
                if (line_on < 4) {
                    xGa_p[7] = Math.round((xGa_p[7] + dxG) * 100) / 100;
                }
                xGa_g[line_on - 1] = Math.round((xGa_g[line_on - 1] + dxG) * 100) / 100;
                if (line_on < 4) {
                    xGa_g[7]= Math.round((xGa_g[7] + dxG) * 100) / 100;
                }
                xa_p[line_on - 1].innerHTML = xGa_p[line_on - 1];
                if (line_on < 4) {
                    xa_p[7].innerHTML = xGa_p[7];
                }
                xa_g[line_on - 1].innerHTML = xGa_g[line_on - 1];
                if (line_on < 4) {
                    xa_g[7].innerHTML = xGa_g[7];
                }
                dataxG = dxG;
                var date = new Date(gameCounter * 1000);
                var display = date.toISOString().substr(11, 8);
                xGTeam_array.push([display, xGf_g[7], xGa_g[7], 0, 0]);
                xGL1_array.push([display, xGf_g[0], xGa_g[0], 0, 0]);
                xGL2_array.push([display, xGf_g[1], xGa_g[1], 0, 0]);
                xGL3_array.push([display, xGf_g[2], xGa_g[2], 0, 0]);

                b = Number(txG_2.innerHTML);
                a = Math.round((b + dxG) * 100) / 100;
                txG_2.innerHTML = a;
            }
        }

        if (Order == 2 && Ball_pos == 2) { // Team 2 shot, Team 2 lower side

            if (dy < 0.5) { // Ball on the attack zone
                var dxG = xG_matrix[Math.floor(dy*2*14)][Math.floor(dx*13)] / 100;

                if (dataType == 1) { // turnover x 1,25 xG
                    dxG = dxG * 1.25;
                }
                if (dataType == 2) { // onetimer x 1,5 xG
                    dxG = dxG * 1.5;
                }
                if (dataType == 3) { // rebound x 1,1 xG
                    dxG = dxG * 1.1;
                }
                if (dataType == 4) { //direct x 0,85 xg
                    dxG = dxG * 0.85;
                }


                xGa_p[line_on - 1] = Math.round((xGa_p[line_on - 1] + dxG) * 100) / 100;
                if (line_on < 4) {
                    xGa_p[7] = Math.round((xGa_p[7] + dxG) * 100) / 100;
                }
                xGa_g[line_on - 1] = Math.round((xGa_g[line_on - 1] + dxG) * 100) / 100;
                if (line_on < 4) {
                    xGa_g[7]= Math.round((xGa_g[7] + dxG) * 100) / 100;
                }
                xa_p[line_on - 1].innerHTML = xGa_p[line_on - 1];
                if (line_on < 4) {
                    xa_p[7].innerHTML = xGa_p[7];
                }
                xa_g[line_on - 1].innerHTML = xGa_g[line_on - 1];
                if (line_on < 4) {
                    xa_g[7].innerHTML = xGa_g[7];
                }
                dataxG = dxG;
                var date = new Date(gameCounter * 1000);
                var display = date.toISOString().substr(11, 8);
                xGTeam_array.push([display, xGf_g[7], xGa_g[7], 0, 0]);
                xGL1_array.push([display, xGf_g[0], xGa_g[0], 0, 0]);
                xGL2_array.push([display, xGf_g[1], xGa_g[1], 0, 0]);
                xGL3_array.push([display, xGf_g[2], xGa_g[2], 0, 0]);

                b = Number(txG_2.innerHTML);
                a = Math.round((b + dxG) * 100) / 100;
                txG_2.innerHTML = a;
            }
        }
    }

    function shotGoal() {
        Draw(PosX,PosY,4);

        var dx = PosX / fWidth;
        var dy = PosY / fLength;

        if (Order == 1 && Ball_pos == 1) { // Team 1 shot, Team 1 lower side

            if (dy < 0.5) { // Ball on the attack zone
                var dxG = xG_matrix[Math.floor(dy*2*14)][Math.floor(dx*13)] / 100;

                if (dataType == 1) { // turnover x 1,25 xG
                    dxG = dxG * 1.25;
                }
                if (dataType == 2) { // onetimer x 1,5 xG
                    dxG = dxG * 1.5;
                }
                if (dataType == 3) { // rebound x 1,1 xG
                    dxG = dxG * 1.1;
                }
                if (dataType == 4) { //direct x 0,85 xg
                    dxG = dxG * 0.85;
                }

                xGf_p[line_on - 1] = Math.round((xGf_p[line_on - 1] + dxG) * 100) / 100;
                if (line_on < 4) {
                    xGf_p[7] = Math.round((xGf_p[7] + dxG) * 100) / 100;
                }
                xGf_g[line_on - 1] = Math.round((xGf_g[line_on - 1] + dxG) * 100) / 100;
                if (line_on < 4) {
                    xGf_g[7]= Math.round((xGf_g[7] + dxG) * 100) / 100;
                }
                xf_p[line_on - 1].innerHTML = xGf_p[line_on - 1];
                if (line_on < 4) {
                    xf_p[7].innerHTML = xGf_p[7];
                }
                xf_g[line_on - 1].innerHTML = xGf_g[line_on - 1];
                if (line_on < 4) {
                    xf_g[7].innerHTML = xGf_g[7];
                }
                dataxG = dxG;
                var date = new Date(gameCounter * 1000);
                var display = date.toISOString().substr(11, 8);
                xGTeam_array.push([display, xGf_g[7], xGa_g[7], xGf_g[7], 0]);

                b = Number(txG_1.innerHTML);
                a = Math.round((b + dxG) * 100) / 100;
                txG_1.innerHTML = a;

                if (line_on == 1) {
                    xGL1_array.push([display, xGf_g[0], xGa_g[0], xGf_g[0], 0]);
                    xGL2_array.push([display, xGf_g[1], xGa_g[1], 0, 0]);
                    xGL3_array.push([display, xGf_g[2], xGa_g[2], 0, 0]);
                }

                if (line_on == 2) {
                    xGL2_array.push([display, xGf_g[1], xGa_g[1], xGf_g[1], 0]);
                    xGL1_array.push([display, xGf_g[0], xGa_g[0], 0, 0]);
                    xGL3_array.push([display, xGf_g[2], xGa_g[2], 0, 0]);
                }

                if (line_on == 3) {
                    xGL3_array.push([display, xGf_g[2], xGa_g[2], xGf_g[2], 0]);
                    xGL1_array.push([display, xGf_g[0], xGa_g[0], 0, 0]);
                    xGL2_array.push([display, xGf_g[1], xGa_g[1], 0, 0]);
                }
            }
        }

        if (Order == 2 && Ball_pos == 1) { // Team 1 shot, Team 1 upper side

            if (dy > 0.5) { // Ball on the attack zone
                var dxG = xG_matrix[13-Math.floor((dy-0.5)*2*13)][12-Math.floor(dx*12)] / 100;

                if (dataType == 1) { // turnover x 1,25 xG
                    dxG = dxG * 1.25;
                }
                if (dataType == 2) { // onetimer x 1,5 xG
                    dxG = dxG * 1.5;
                }
                if (dataType == 3) { // rebound x 1,1 xG
                    dxG = dxG * 1.1;
                }
                if (dataType == 4) { //direct x 0,85 xg
                    dxG = dxG * 0.85;
                }

                xGf_p[line_on - 1] = Math.round((xGf_p[line_on - 1] + dxG) * 100) / 100;
                if (line_on < 4) {
                    xGf_p[7] = Math.round((xGf_p[7] + dxG) * 100) / 100;
                }
                xGf_g[line_on - 1] = Math.round((xGf_g[line_on - 1] + dxG) * 100) / 100;
                if (line_on < 4) {
                    xGf_g[7]= Math.round((xGf_g[7] + dxG) * 100) / 100;
                }
                xf_p[line_on - 1].innerHTML = xGf_p[line_on - 1];
                if (line_on < 4) {
                    xf_p[7].innerHTML = xGf_p[7];
                }
                xf_g[line_on - 1].innerHTML = xGf_g[line_on - 1];
                if (line_on < 4) {
                    xf_g[7].innerHTML = xGf_g[7];
                };
                dataxG = dxG;
                var date = new Date(gameCounter * 1000);
                var display = date.toISOString().substr(11, 8);
                xGTeam_array.push([display, xGf_g[7], xGa_g[7], xGf_g[7], 0]);

                b = Number(txG_1.innerHTML);
                a = Math.round((b + dxG) * 100) / 100;
                txG_1.innerHTML = a;

                if (line_on == 1) {
                    xGL1_array.push([display, xGf_g[0], xGa_g[0], xGf_g[0], 0]);
                    xGL2_array.push([display, xGf_g[1], xGa_g[1], 0, 0]);
                    xGL3_array.push([display, xGf_g[2], xGa_g[2], 0, 0]);
                }

                if (line_on == 2) {
                    xGL2_array.push([display, xGf_g[1], xGa_g[1], xGf_g[1], 0]);
                    xGL1_array.push([display, xGf_g[0], xGa_g[0], 0, 0]);
                    xGL3_array.push([display, xGf_g[2], xGa_g[2], 0, 0]);
                }

                if (line_on == 3) {
                    xGL3_array.push([display, xGf_g[2], xGa_g[2], xGf_g[2], 0]);
                    xGL1_array.push([display, xGf_g[0], xGa_g[0], 0, 0]);
                    xGL2_array.push([display, xGf_g[1], xGa_g[1], 0, 0]);
                }
            }
        }

        if (Order == 1 && Ball_pos == 2) { // Team 2 shot, Team 2 upper side

            if (dy > 0.5) { // Ball on the attack zone
                var dxG = xG_matrix[13-Math.floor((dy-0.5)*2*13)][12-Math.floor(dx*12)] / 100;

                if (dataType == 1) { // turnover x 1,25 xG
                    dxG = dxG * 1.25;
                }
                if (dataType == 2) { // onetimer x 1,5 xG
                    dxG = dxG * 1.5;
                }
                if (dataType == 3) { // rebound x 1,1 xG
                    dxG = dxG * 1.1;
                }
                if (dataType == 4) { //direct x 0,85 xg
                    dxG = dxG * 0.85;
                }

                xGa_p[line_on - 1] = Math.round((xGa_p[line_on - 1] + dxG) * 100) / 100;
                if (line_on < 4) {
                    xGa_p[7] = Math.round((xGa_p[7] + dxG) * 100) / 100;
                }
                xGa_g[line_on - 1] = Math.round((xGa_g[line_on - 1] + dxG) * 100) / 100;
                if (line_on < 4) {
                    xGa_g[7]= Math.round((xGa_g[7] + dxG) * 100) / 100;
                }
                xa_p[line_on - 1].innerHTML = xGa_p[line_on - 1];
                if (line_on < 4) {
                    xa_p[7].innerHTML = xGa_p[7];
                }
                xa_g[line_on - 1].innerHTML = xGa_g[line_on - 1];
                if (line_on < 4) {
                    xa_g[7].innerHTML = xGa_g[7];
                }
                dataxG = dxG;
                var date = new Date(gameCounter * 1000);
                var display = date.toISOString().substr(11, 8);
                xGTeam_array.push([display, xGf_g[7], xGa_g[7], 0, xGa_g[7]]);

                b = Number(txG_2.innerHTML);
                a = Math.round((b + dxG) * 100) / 100;
                txG_2.innerHTML = a;

                if (line_on == 1) {
                    xGL1_array.push([display, xGf_g[0], xGa_g[0], 0, xGa_g[0]]);
                    xGL2_array.push([display, xGf_g[1], xGa_g[1], 0, 0]);
                    xGL3_array.push([display, xGf_g[2], xGa_g[2], 0, 0]);
                }

                if (line_on == 2) {
                    xGL2_array.push([display, xGf_g[1], xGa_g[1], 0, xGa_g[1]]);
                    xGL1_array.push([display, xGf_g[0], xGa_g[0], 0, 0]);
                    xGL3_array.push([display, xGf_g[2], xGa_g[2], 0, 0]);
                }

                if (line_on == 3) {
                    xGL3_array.push([display, xGf_g[2], xGa_g[2], 0, xGa_g[2]]);
                    xGL1_array.push([display, xGf_g[0], xGa_g[0], 0, 0]);
                    xGL2_array.push([display, xGf_g[1], xGa_g[1], 0, 0]);
                }
            }
        }

        if (Order == 2 && Ball_pos == 2) { // Team 2 shot, Team 2 lower side

            if (dy < 0.5) { // Ball on the attack zone
                var dxG = xG_matrix[Math.floor(dy*2*14)][Math.floor(dx*13)] / 100;

                if (dataType == 1) { // turnover x 1,25 xG
                    dxG = dxG * 1.25;
                }
                if (dataType == 2) { // onetimer x 1,5 xG
                    dxG = dxG * 1.5;
                }
                if (dataType == 3) { // rebound x 1,1 xG
                    dxG = dxG * 1.1;
                }
                if (dataType == 4) { //direct x 0,85 xg
                    dxG = dxG * 0.85;
                }

                xGa_p[line_on - 1] = Math.round((xGa_p[line_on - 1] + dxG) * 100) / 100;
                if (line_on < 4) {
                    xGa_p[7] = Math.round((xGa_p[7] + dxG) * 100) / 100;
                }
                xGa_g[line_on - 1] = Math.round((xGa_g[line_on - 1] + dxG) * 100) / 100;
                if (line_on < 4) {
                    xGa_g[7]= Math.round((xGa_g[7] + dxG) * 100) / 100;
                }
                xa_p[line_on - 1].innerHTML = xGa_p[line_on - 1];
                if (line_on < 4) {
                    xa_p[7].innerHTML = xGa_p[7];
                }
                xa_g[line_on - 1].innerHTML = xGa_g[line_on - 1];
                if (line_on < 4) {
                    xa_g[7].innerHTML = xGa_g[7];
                }
                dataxG = dxG;
                var date = new Date(gameCounter * 1000);
                var display = date.toISOString().substr(11, 8);
                xGTeam_array.push([display, xGf_g[7], xGa_g[7], 0, xGa_g[7]]);

                b = Number(txG_2.innerHTML);
                a = Math.round((b + dxG) * 100) / 100;
                txG_2.innerHTML = a;

                if (line_on == 1) {
                    xGL1_array.push([display, xGf_g[0], xGa_g[0], 0, xGa_g[0]]);
                    xGL2_array.push([display, xGf_g[1], xGa_g[1], 0, 0]);
                    xGL3_array.push([display, xGf_g[2], xGa_g[2], 0, 0]);
                }

                if (line_on == 2) {
                    xGL2_array.push([display, xGf_g[1], xGa_g[1], 0, xGa_g[1]]);
                    xGL1_array.push([display, xGf_g[0], xGa_g[0], 0, 0]);
                    xGL3_array.push([display, xGf_g[2], xGa_g[2], 0, 0]);
                }

                if (line_on == 3) {
                    xGL3_array.push([display, xGf_g[2], xGa_g[2], 0, xGa_g[2]]);
                    xGL1_array.push([display, xGf_g[0], xGa_g[0], 0, 0]);
                    xGL2_array.push([display, xGf_g[1], xGa_g[1], 0, 0]);
                }
            }
        }
    }

    function Draw(x,y,type)
    {
        var ctx = cnvs.getContext("2d");
        menu.style.display = "none";
        ctx.font = "12px Arial";

        if (Ball_pos == 1) {
            ctx.fillStyle = "blue";
            dataShot = 1;
            if (type == 1) {    // Shot Missed
                ctx.fillText("M", x, y);
                dataRes = 1;

                sf_p[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    sf_p[7].innerHTML++;
                }
                sf_g[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    sf_g[7].innerHTML++;
                }
                mf_p[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    mf_p[7].innerHTML++;
                }
                mf_g[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    mf_g[7].innerHTML++;
                }
            }
            else if (type == 3) {   // Shot Blocked
                ctx.fillText("B", x, y);
                dataRes = 3;
                
                sf_p[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    sf_p[7].innerHTML++;
                }
                sf_g[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    sf_g[7].innerHTML++;
                }
                ba_g[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    ba_g[7].innerHTML++;
                }
                ba_p[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    ba_p[7].innerHTML++;
                }
            }
            else if (type == 2) {   // Shot Saved
                ctx.fillText("S", x, y);
                dataRes = 2;
                
                sf_p[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    sf_p[7].innerHTML++;
                }
                sf_g[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    sf_g[7].innerHTML++;
                }
                saf_p[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    saf_p[7].innerHTML++;
                }
                saf_g[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    saf_g[7].innerHTML++;
                }
            }
            else if (type == 4) {   // Shot Goal
                ctx.fillText("G", x, y);
                dataRes = 4;
                
                sf_p[line_on - 1].innerHTML++;
                gf_p[line_on - 1].innerHTML++;
                pm_p[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    sf_p[7].innerHTML++;
                    gf_p[7].innerHTML++;
                    pm_p[7].innerHTML++;
                }
                
                sf_g[line_on - 1].innerHTML++;
                gf_g[line_on - 1].innerHTML++;
                pm_g[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    sf_g[7].innerHTML++;
                    gf_g[7].innerHTML++;
                    pm_g[7].innerHTML++;
                }

                tgt_1.innerHTML++;
            }
        }
        else if (Ball_pos == 2) {
            ctx.fillStyle = "red";
            dataShot = 2;

            if (type == 1) {    // Shot Missed
                ctx.fillText("M", x, y);
                dataRes = 1;
                
                sa_p[line_on - 1].innerHTML++;
                sa_g[line_on - 1].innerHTML++;
                ma_p[line_on - 1].innerHTML++;
                ma_g[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    sa_g[7].innerHTML++;
                    sa_p[7].innerHTML++;
                    ma_p[7].innerHTML++;
                    ma_g[7].innerHTML++;
                }
            }
            else if (type == 3) {   // Shot Blocked
                ctx.fillText("B", x, y);
                dataRes = 3;
                
                sa_p[line_on - 1].innerHTML++;
                bf_p[line_on - 1].innerHTML++;
                sa_g[line_on - 1].innerHTML++;
                bf_g[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    sa_g[7].innerHTML++;
                    bf_g[7].innerHTML++;
                    sa_p[7].innerHTML++;
                    bf_p[7].innerHTML++;
                }
            }
            else if (type == 2) {   // Shot Saved
                ctx.fillText("S", x, y);
                dataRes = 2;
                
                sa_p[line_on - 1].innerHTML++;
                sa_g[line_on - 1].innerHTML++;
                saa_p[line_on - 1].innerHTML++;
                saa_g[line_on - 1].innerHTML++;
                if (line_on < 4) {
                    sa_p[7].innerHTML++;
                    sa_g[7].innerHTML++;
                    saa_p[7].innerHTML++;
                    saa_g[7].innerHTML++;
                }
            }
            else if (type == 4) {   // Shot Goal
                ctx.fillText("G", x, y);
                dataRes = 4;
                
                sa_p[line_on - 1].innerHTML++;
                ga_p[line_on - 1].innerHTML++;
                pm_p[line_on - 1].innerHTML--;
                if (line_on < 4) {
                    sa_p[7].innerHTML++;
                    ga_p[7].innerHTML++;
                    pm_p[7].innerHTML--;
                }
                
                sa_g[line_on - 1].innerHTML++;
                ga_g[line_on - 1].innerHTML++;
                pm_g[line_on - 1].innerHTML--;
                if (line_on < 4) {
                    sa_g[7].innerHTML++;
                    ga_g[7].innerHTML++;
                    pm_g[7].innerHTML--;
                }

                tgt_2.innerHTML++;
            }
        }

        // Shot Angle and Distance calculation
        // Goal place(s) y=50/450, x=150 (x = 10%/90% of length, y=50% of width)
        // Field dimensions = 20m x 40m (fWidth x fLength)
        // Shot Angle in respect to reference line (line from the center of the goal line to the
        // left goal post from the goalie's perspective)

        var b = (150 - x) * 20 / fWidth;

        if (Ball_pos == 1) {
            if (Order == 1) {
                var a = (50 - y) * 40 / fLength;
                dataDis = Math.sqrt( a*a + b*b );

                var dAy = 50 - 50; // Reference line
                var dAx = 300 - 150;
                var dBy = y - 50; // Line from the shot position to the center of the goal line
                var dBx = x - 150;

                var angle = Math.atan2(dAx * dBy - dAy * dBx, dAx * dBx + dAy * dBy);
                if (angle < 0) {angle = angle * -1;}
                dataAngle = angle * (180 / Math.PI);

            }
        }
        if (Ball_pos == 1) {
            if (Order == 2) {
                var a = (450 - y) * 40 / fLength;
                dataDis = Math.sqrt( a*a + b*b );

                var dAy = 450 - 450; // Reference line
                var dAx = 0 - 150;
                var dBy = y - 450; // Line from the shot position to the center of the goal line
                var dBx = x - 150;

                var angle = Math.atan2(dAx * dBy - dAy * dBx, dAx * dBx + dAy * dBy);
                if (angle < 0) {angle = angle * -1;}
                dataAngle = angle * (180 / Math.PI);
            }
        }
        if (Ball_pos == 2) {
            if (Order == 1) {
                var a = (450 - y) * 40 / fLength;
                dataDis = Math.sqrt( a*a + b*b );

                var dAy = 450 - 450; // Reference line
                var dAx = 0 - 150;
                var dBy = y - 450; // Line from the shot position to the center of the goal line
                var dBx = x - 150;

                var angle = Math.atan2(dAx * dBy - dAy * dBx, dAx * dBx + dAy * dBy);
                if (angle < 0) {angle = angle * -1;}
                dataAngle = angle * (180 / Math.PI);
            }
        }
        if (Ball_pos == 2) {
            if (Order == 2) {
                var a = (50 - y) * 40 / fLength;
                dataDis = Math.sqrt( a*a + b*b );

                var dAy = 50 - 50; // Reference line
                var dAx = 300 - 150;
                var dBy = y - 50; // Line from the shot position to the center of the goal line
                var dBx = x - 150;

                var angle = Math.atan2(dAx * dBy - dAy * dBx, dAx * dBx + dAy * dBy);
                if (angle < 0) {angle = angle * -1;}
                dataAngle = angle * (180 / Math.PI);
            }
        }
        if (line_on < 4) {
            dataPp = 0;
            dataSh = 0;
        }
        if (line_on == 4 || line_on == 5) {
            dataPp = 1;
        }
        if (line_on == 6 || line_on == 7) {
            dataSh = 1;
        }

        // Shot menu

        menu.style.display = "none";
        shotData.push([gameCounter, Ball_pos, dataRes, dataType, dataDis, dataAngle, dataPp, dataSh]);
    }

    function shotTurnover() {
        dataType = 1;
        stype.style.display = "none";
        menu.style.display = "block";
        menu.style.left = stype.style.left;
        menu.style.top = stype.style.top;
        // shotData.push([gameCounter, Ball_pos, dataRes, dataType, dataDis, dataAngle, dataPp, dataSh]);
        // console.log(shotData);
    }

    function shotOnetimer() {
        dataType = 2;
        stype.style.display = "none";
        menu.style.display = "block";
        menu.style.left = stype.style.left;
        menu.style.top = stype.style.top;
        // shotData.push([gameCounter, Ball_pos, dataRes, dataType, dataDis, dataAngle, dataPp, dataSh]);
        // console.log(shotData);
    }

    function shotRebound() {
        dataType = 3;
        stype.style.display = "none";
        menu.style.display = "block";
        menu.style.left = stype.style.left;
        menu.style.top = stype.style.top;
        // shotData.push([gameCounter, Ball_pos, dataRes, dataType, dataDis, dataAngle, dataPp, dataSh]);
        // console.log(shotData);
    }

    function shotDirect() {
        dataType = 4;
        stype.style.display = "none";
        menu.style.display = "block";
        menu.style.left = stype.style.left;
        menu.style.top = stype.style.top;
        // shotData.push([gameCounter, Ball_pos, dataRes, dataType, dataDis, dataAngle, dataPp, dataSh]);
        // console.log(shotData);
    }

    function sendData() {

        var r = confirm("Are you sure you want to send data,\n do this when your game is over?");
        if (r == true) {
            let today = new Date().toLocaleDateString()

            Email.send({
                SecureToken : "3b145e7d-a832-4993-b00e-15a5d25b5b98",
                To : 'floorballscanner@gmail.com',
                From : "floorballscanner@gmail.com",
                Subject : "Game Data",
                Body : "<html><h2>"+ today +": "+ hTeam.value +" - "+ aTeam.value +"</h2><p>"+ shotData +"</p></br><p>"+ timeData +"</html>",
                }).then(
                    message => alert(message)
            );
        }

        console.log("sendData pressed");
    }

    function drawChart() {

        // Team xG Chart
        var data = google.visualization.arrayToDataTable(xGTeam_array);

        var options = {
          title: 'xG by Team',
          curveType: 'function',
          legend: { position: 'bottom' },
          seriesType: 'lines',
          series: {
              2:{type: 'bars', color: 'blue'},
              3:{type: 'bars', color: 'red'}}
        };

        var chart = new google.visualization.ComboChart(document.getElementById('xGTeam_chart'));
        chart.draw(data, options);

        // Line 1 xG Chart
        var data = google.visualization.arrayToDataTable(xGL1_array);

        var options = {
          title: 'xG by Line 1',
          curveType: 'function',
          legend: { position: 'bottom' },
          seriesType: 'lines',
          series: {
              2:{type: 'bars', color: 'blue'},
              3:{type: 'bars', color: 'red'}}
        };

        var chart = new google.visualization.ComboChart(document.getElementById('xGL1_chart'));
        chart.draw(data, options);

        // Line 2 xG Chart
        var data = google.visualization.arrayToDataTable(xGL2_array);

        var options = {
          title: 'xG by Line 2',
          curveType: 'function',
          legend: { position: 'bottom' },
          seriesType: 'lines',
          series: {
              2:{type: 'bars', color: 'blue'},
              3:{type: 'bars', color: 'red'}}
        };

        var chart = new google.visualization.ComboChart(document.getElementById('xGL2_chart'));
        chart.draw(data, options);

        // Line 3 xG Chart
        var data = google.visualization.arrayToDataTable(xGL3_array);

        var options = {
          title: 'xG by Line 3',
          curveType: 'function',
          legend: { position: 'bottom' },
          seriesType: 'lines',
          series: {
              2:{type: 'bars', color: 'blue'},
              3:{type: 'bars', color: 'red'}}
        };

        var chart = new google.visualization.ComboChart(document.getElementById('xGL3_chart'));
        chart.draw(data, options);

        // Position Chart
        var data = google.visualization.arrayToDataTable(posTeam_array);

        var options = {
          title: 'Possession by Line',
          curveType: 'function',
          legend: { position: 'bottom' },
          seriesType: 'bars',
          series: {
              0:{color: 'blue'},
              1:{color: 'purple'},
              2:{color: 'yellow'},
              3:{color: 'green'},
              4:{color: 'red'},
              5:{type: 'line', color: 'black'}}
        };

        var chart = new google.visualization.ComboChart(document.getElementById('posTeam_chart'));
        chart.draw(data, options);

    }

</script>

{% endblock %}