<!--

This is the New Game Analysis - html - page content file. It contains all the functionality of game analysis.
It extends app_layout.html with Django

-->

{% extends 'app_layout.html' %}
{% block content %}

<div class="container">
    <h3>Analyze Game</h3>
    <div class="row">
        <div class="team-selection">
			<div class="col-sm-4">
                <h2>Team 1</h2>
                <select id="home_teams">
                    <option value="None">-- Select --</option>
                    <option value="ID001">Rangers</option>
                    <option value="ID002">Oilers</option>
                    <option value="ID003">Add team...</option>
                </select>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="game-clock">
                <h4 id="periodNr">Period 1</h4>
                <h2 id="label">00:00:00</h2>
            </div>
            <div class="game-btn" role="group" aria-label="Game buttons">
                <button id="reset" type="button" onclick="Reset()" disabled="true" class="btn btn-secondary">Reset</button>
                <button id="start" type="button" onclick="Start()" class="btn btn-secondary btn-lg">Start game</button>
                <button id="period" type="button" onclick="Period()" disabled="true" class="btn btn-secondary">Period</button>
            </div>
        </div>
        <div class="team-selection">
			<div class="col-sm-4">
                <h2>Team 2</h2>
                <select id="away_teams">
                    <option value="None">-- Select --</option>
                    <option value="ID001">Rangers</option>
                    <option value="ID002">Oilers</option>
                    <option value="ID003">Add team...</option>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="shot-map">
			<div class="col-sm-4">
                <p>Shot mapping</p>
                <canvas id="myCanvas" onmousedown="GetCoordinates()" width="355" height="250"></canvas>
            </div>
        </div>
        <div class="button-input">
            <div class="col-sm-4">
                <p>Line on court</p>
                <div class="line-btn btn-group-lg" role="group" aria-label="Line buttons">
                    <button id="L1" type="button" style="background-color: #555555" onclick="Line_change(1)" class="btn btn-secondary">Line 1</button>
                    <button id="L2" type="button" onclick="Line_change(2)" class="btn btn-secondary">Line 2</button>
                    <button id="L3" type="button" onclick="Line_change(3)" class="btn btn-secondary">Line 3</button>
                </div>
                <div class="line-btn" role="group" aria-label="Line buttons">
                    <button id="Pp1" type="button" onclick="Line_change(4)" class="btn btn-secondary">PP 1</button>
                    <button id="Pp2" type="button" onclick="Line_change(5)" class="btn btn-secondary">PP 2</button>
                    <button id="Sh1" type="button" onclick="Line_change(6)" class="btn btn-secondary">SH 1</button>
                    <button id="Sh2" type="button" onclick="Line_change(7)" class="btn btn-secondary">SH 2</button>
                </div>
            </div>
        </div>
        <div class="pos-input">
            <div class="col-sm-4">
                <p>Position</p>
                <input type="image" id="changeorder" onclick="ChangeOrder()" src="/static/change_icon.jpeg" width="30" height="30" alt="order">
                <div class="pos-btn btn-group-lg" role="group" aria-label="Position buttons">
                    <button id="TeamL" type="button" style="background-color: #555555" onclick="BallTeamL()" class="btn btn-secondary">Team 1</button>
                    <button id="TeamR" type="button" onclick="BallTeamR()" class="btn btn-secondary">Team 2</button>
                </div>
                <div class="zone-btn btn-group-lg btn-group-lg" role="group" aria-label="Zone buttons">
                    <button id="ZoneL" type="button" style="background-color: #555555" onclick="BallZoneL()" class="btn btn-secondary">Defence</button>
                    <button id="ZoneR" type="button" onclick="BallZoneR()" class="btn btn-secondary">Attack</button>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div id="sL1" class="stats-L1">
			<div class="col-sm-3">
                <h4><hr/>Line 1</h4>
                <p style="padding-top: 10px">Possession: <span id="pL1">0</span>% | <span id="pL1g">0</span>%<p/>
                <p>Time on Court: <span id="tocL1">0:00</span> | <span id="tocL1g">0:00</span></p>
                <p>Att Zone w Ball: <span id="attz1L1">0</span>% | <span id="attz1L1g">0</span>%</p>
                <p>Att Zone no Ball: <span id="attz2L1">0</span>% | <span id="attz2L1g">0</span>%</p>
                <p>Def Zone w Ball: <span id="defz1L1">0</span>% | <span id="defz1L1g">0</span>%</p>
                <p>Def Zone no Ball: <span id="defz2L1">0</span>% | <span id="defz2L1g">0</span>%</p>
                <p style="padding-top: 10px">Shots for: <span id="sfL1">0</span> | <span id="sfL1g">0</span></p>
                <p>Shots against: <span id="saL1">0</span> | <span id="saL1g">0</span></p>
                <p>Blocks for: <span id="bfL1">0</span> | <span id="bfL1g">0</span></p>
                <p>Blocks against: <span id="baL1">0</span> | <span id="baL1g">0</span></p>
                <p style="padding-top: 10px">Goals for: <span id="gfL1">0</span> | <span id="gfL1g">0</span></p>
                <p>Goals against: <span id="gaL1">0</span> | <span id="gaL1g">0</span></p>
                <p>Plus minus: <span id="pmL1">0</span> | <span id="pmL1g">0</span></p>
            </div>
        </div>
        <div id="sL2" class="stats-L2">
			<div class="col-sm-3">
                <h4><hr/>Line 2</h4>
                <p style="padding-top: 10px">Possession: <span id="pL2">0</span>% | <span id="pL2g">0</span>%<p/>
                <p>Time on Court: <span id="tocL2">0:00</span> | <span id="tocL2g">0:00</span></p>
                <p>Att Zone w Ball: <span id="attz1L2">0</span>% | <span id="attz1L2g">0</span>%</p>
                <p>Att Zone no Ball: <span id="attz2L2">0</span>% | <span id="attz2L2g">0</span>%</p>
                <p>Def Zone w Ball: <span id="defz1L2">0</span>% | <span id="defz1L2g">0</span>%</p>
                <p>Def Zone no Ball: <span id="defz2L2">0</span>% | <span id="defz2L2g">0</span>%</p>
                <p style="padding-top: 10px">Shots for: <span id="sfL2">0</span> | <span id="sfL2g">0</span></p>
                <p>Shots against: <span id="saL2">0</span> | <span id="saL2g">0</span></p>
                <p>Blocks for: <span id="bfL2">0</span> | <span id="bfL2g">0</span></p>
                <p>Blocks against: <span id="baL2">0</span> | <span id="baL2g">0</span></p>
                <p style="padding-top: 10px">Goals for: <span id="gfL2">0</span> | <span id="gfL2g">0</span></p>
                <p>Goals against: <span id="gaL2">0</span> | <span id="gaL2g">0</span></p>
                <p>Plus minus: <span id="pmL2">0</span> | <span id="pmL2g">0</span></p>
            </div>
        </div>
        <div id="sL3" class="stats-L3">
			<div class="col-sm-3">
                <h4><hr/>Line 3</h4>
                <p style="padding-top: 10px">Possession: <span id="pL3">0</span>% | <span id="pL3g">0</span>%<p/>
                <p>Time on Court: <span id="tocL3">0:00</span> | <span id="tocL3g">0:00</span></p>
                <p>Att Zone w Ball: <span id="attz1L3">0</span>% | <span id="attz1L3g">0</span>%</p>
                <p>Att Zone no Ball: <span id="attz2L3">0</span>% | <span id="attz2L3g">0</span>%</p>
                <p>Def Zone w Ball: <span id="defz1L3">0</span>% | <span id="defz1L3g">0</span>%</p>
                <p>Def Zone no Ball: <span id="defz2L3">0</span>% | <span id="defz2L3g">0</span>%</p>
                <p style="padding-top: 10px">Shots for: <span id="sfL3">0</span> | <span id="sfL3g">0</span></p>
                <p>Shots against: <span id="saL3">0</span> | <span id="saL3g">0</span></p>
                <p>Blocks for: <span id="bfL3">0</span> | <span id="bfL3g">0</span></p>
                <p>Blocks against: <span id="baL3">0</span> | <span id="baL3g">0</span></p>
                <p style="padding-top: 10px">Goals for: <span id="gfL3">0</span> | <span id="gfL3g">0</span></p>
                <p>Goals against: <span id="gaL3">0</span> | <span id="gaL3g">0</span></p>
                <p>Plus minus: <span id="pmL3">0</span> | <span id="pmL3g">0</span></p>
            </div>
        </div>
        <div id="sTeam" class="stats-Team">
			<div class="col-sm-3">
                <h4><hr/>Team</h4>
                <p style="padding-top: 10px">Possession: <span id="pTeam">0</span>% | <span id="pTeamg">0</span>%<p/>
                <p>Time on Court: <span id="tocTeam">0:00</span> | <span id="tocTeamg">0:00</span></p>
                <p>Att Zone w Ball: <span id="attz1Team">0</span>% | <span id="attz1Teamg">0</span>%</p>
                <p>Att Zone no Ball: <span id="attz2Team">0</span>% | <span id="attz2Teamg">0</span>%</p>
                <p>Def Zone w Ball: <span id="defz1Team">0</span>% | <span id="defz1Teamg">0</span>%</p>
                <p>Def Zone no Ball: <span id="defz2Team">0</span>% | <span id="defz2Teamg">0</span>%</p>
                <p style="padding-top: 10px">Shots for: <span id="sfTeam">0</span> | <span id="sfTeamg">0</span></p>
                <p>Shots against: <span id="saTeam">0</span> | <span id="saTeamg">0</span></p>
                <p>Blocks for: <span id="bfTeam">0</span> | <span id="bfTeamg">0</span></p>
                <p>Blocks against: <span id="baTeam">0</span> | <span id="baTeamg">0</span></p>
                <p style="padding-top: 10px">Goals for: <span id="gfTeam">0</span> | <span id="gfTeamg">0</span></p>
                <p>Goals against: <span id="gaTeam">0</span> | <span id="gaTeamg">0</span></p>
                <p>Plus minus: <span id="pmTeam">0</span> | <span id="pmTeamg">0</span></p>
            </div>
        </div>
    </div>
    <div class="row">
        <div id="sPP1" class="stats-PP1">
			<div class="col-sm-3">
                <h4><hr/>Powerplay 1</h4>
                <p style="padding-top: 10px">Possession: <span id="pPP1">0</span>% | <span id="pPP1g">0</span>%<p/>
                <p>Time on Court: <span id="tocPP1">0:00</span> | <span id="tocPP1g">0:00</span></p>
                <p>Att Zone w Ball: <span id="attz1PP1">0</span>% | <span id="attz1PP1g">0</span>%</p>
                <p>Att Zone no Ball: <span id="attz2PP1">0</span>% | <span id="attz2PP1g">0</span>%</p>
                <p>Def Zone w Ball: <span id="defz1PP1">0</span>% | <span id="defz1PP1g">0</span>%</p>
                <p>Def Zone no Ball: <span id="defz2PP1">0</span>% | <span id="defz2PP1g">0</span>%</p>
                <p style="padding-top: 10px">Shots for: <span id="sfPP1">0</span> | <span id="sfPP1g">0</span></p>
                <p>Shots against: <span id="saPP1">0</span> | <span id="saPP1g">0</span></p>
                <p>Blocks for: <span id="bfPP1">0</span> | <span id="bfPP1g">0</span></p>
                <p>Blocks against: <span id="baPP1">0</span> | <span id="baPP1g">0</span></p>
                <p style="padding-top: 10px">Goals for: <span id="gfPP1">0</span> | <span id="gfPP1g">0</span></p>
                <p>Goals against: <span id="gaPP1">0</span> | <span id="gaPP1g">0</span></p>
                <p>Plus minus: <span id="pmPP1">0</span> | <span id="pmPP1g">0</span></p>
            </div>
        </div>
        <div id="sPP2" class="stats-PP2">
			<div class="col-sm-3">
                <h4><hr/>Powerplay 2</h4>
                <p style="padding-top: 10px">Possession: <span id="pPP2">0</span>% | <span id="pPP2g">0</span>%<p/>
                <p>Time on Court: <span id="tocPP2">0:00</span> | <span id="tocPP2g">0:00</span></p>
                <p>Att Zone w Ball: <span id="attz1PP2">0</span>% | <span id="attz1PP2g">0</span>%</p>
                <p>Att Zone no Ball: <span id="attz2PP2">0</span>% | <span id="attz2PP2g">0</span>%</p>
                <p>Def Zone w Ball: <span id="defz1PP2">0</span>% | <span id="defz1PP2g">0</span>%</p>
                <p>Def Zone no Ball: <span id="defz2PP2">0</span>% | <span id="defz2PP2g">0</span>%</p>
                <p style="padding-top: 10px">Shots for: <span id="sfPP2">0</span> | <span id="sfPP2g">0</span></p>
                <p>Shots against: <span id="saPP2">0</span> | <span id="saPP2g">0</span></p>
                <p>Blocks for: <span id="bfPP2">0</span> | <span id="bfPP2g">0</span></p>
                <p>Blocks against: <span id="baPP2">0</span> | <span id="baPP2g">0</span></p>
                <p style="padding-top: 10px">Goals for: <span id="gfPP2">0</span> | <span id="gfPP2g">0</span></p>
                <p>Goals against: <span id="gaPP2">0</span> | <span id="gaPP2g">0</span></p>
                <p>Plus minus: <span id="pmPP2">0</span> | <span id="pmPP2g">0</span></p>
            </div>
        </div>
        <div id="sSH1" class="stats-SH1">
			<div class="col-sm-3">
                <h4><hr/>Shorthanded 1</h4>
                <p style="padding-top: 10px">Possession: <span id="pSH1">0</span>% | <span id="pSH1g">0</span>%<p/>
                <p>Time on Court: <span id="tocSH1">0:00</span> | <span id="tocSH1g">0:00</span></p>
                <p>Att Zone w Ball: <span id="attz1SH1">0</span>% | <span id="attz1SH1g">0</span>%</p>
                <p>Att Zone no Ball: <span id="attz2SH1">0</span>% | <span id="attz2SH1g">0</span>%</p>
                <p>Def Zone w Ball: <span id="defz1SH1">0</span>% | <span id="defz1SH1g">0</span>%</p>
                <p>Def Zone no Ball: <span id="defz2SH1">0</span>% | <span id="defz2SH1g">0</span>%</p>
                <p style="padding-top: 10px">Shots for: <span id="sfSH1">0</span> | <span id="sfSH1g">0</span></p>
                <p>Shots against: <span id="saSH1">0</span> | <span id="saSH1g">0</span></p>
                <p>Blocks for: <span id="bfSH1">0</span> | <span id="bfSH1g">0</span></p>
                <p>Blocks against: <span id="baSH1">0</span> | <span id="baSH1g">0</span></p>
                <p style="padding-top: 10px">Goals for: <span id="gfSH1">0</span> | <span id="gfSH1g">0</span></p>
                <p>Goals against: <span id="gaSH1">0</span> | <span id="gaSH1g">0</span></p>
                <p>Plus minus: <span id="pmSH1">0</span> | <span id="pmSH1g">0</span></p>
            </div>
        </div>
        <div id="sSH2" class="stats-SH2">
			<div class="col-sm-3">
                <h4><hr/>Shorthanded 2</h4>
                <p style="padding-top: 10px">Possession: <span id="pSH2">0</span>% | <span id="pSH2g">0</span>%<p/>
                <p>Time on Court: <span id="tocSH2">0:00</span> | <span id="tocSH2g">0:00</span></p>
                <p>Att Zone w Ball: <span id="attz1SH2">0</span>% | <span id="attz1SH2g">0</span>%</p>
                <p>Att Zone no Ball: <span id="attz2SH2">0</span>% | <span id="attz2SH2g">0</span>%</p>
                <p>Def Zone w Ball: <span id="defz1SH2">0</span>% | <span id="defz1SH2g">0</span>%</p>
                <p>Def Zone no Ball: <span id="defz2SH2">0</span>% | <span id="defz2SH2g">0</span>%</p>
                <p style="padding-top: 10px">Shots for: <span id="sfSH2">0</span> | <span id="sfSH2g">0</span></p>
                <p>Shots against: <span id="saSH2">0</span> | <span id="saSH2g">0</span></p>
                <p>Blocks for: <span id="bfSH2">0</span> | <span id="bfSH2g">0</span></p>
                <p>Blocks against: <span id="baSH2">0</span> | <span id="baSH2g">0</span></p>
                <p style="padding-top: 10px">Goals for: <span id="gfSH2">0</span> | <span id="gfSH2g">0</span></p>
                <p>Goals against: <span id="gaSH2">0</span> | <span id="gaSH2g">0</span></p>
                <p>Plus minus: <span id="pmSH2">0</span> | <span id="pmSH2g">0</span></p>
            </div>
        </div>
    </div>
</div>

<div id="shotmenu" class="shot-menu">
  <ul class="menu-options">
    <li class="menu-option" onclick="shotMissed()">Missed</li>
    <li class="menu-option" onclick="shotSaved()">Saved</li>
    <li class="menu-option" onclick="shotBlocked()">Blocked</li>
    <li class="menu-option" onclick="shotGoal()">Goal</li>
  </ul>
</div>

<!-- The JavaScript - code that describes the game analysis functionality -->

<script>

    // Variables

    var line_on = 1; // Line on court
    var started = 0; // Game started 0/1
    var lines = ["L1", "L2", "L3", "Pp1", "Pp2", "Sh1", "Sh2"]; // Line array
    var is_on = 0; // Game clock on 1/0
    var counter = 1; // Counter for the period time * 1000 ms
    var gameCounter = 1; // Counter for the game time * 1000 ms
    var periodN = 1; // Period number
    var Ball_pos = 1; // Ball possession Team 1/2
    var Ball_zone = 1; // Ball at the def zone (1) or att zone (2) in relation to Team 1
    var Order = 1; // Order of team and zone buttons 1/2
    var PosX = 0;
    var PosY = 0;
    var myImg = new Image();
    myImg.src = "/static/field_canvas.png";

    // Time on court by line period/game (in counters)

    var TocL1p = 0;
    var TocL2p = 0;
    var TocL3p = 0;
    var TocL1g = 0;
    var TocL2g = 0;
    var TocL3g = 0;
    var TocPP1p = 0;
    var TocPP2p = 0; 
    var TocSH1p = 0;
    var TocSH2p = 0;
    var TocPP1g = 0;
    var TocPP2g = 0; 
    var TocSH1g = 0;
    var TocSH2g = 0;
    var TocTeam_g = 0;
    var TocTeam_p = 0;

    // Ball possession by line/team period/game (in counters)

    var PosL1p = 0;
    var PosL2p = 0;
    var PosL3p = 0;
    var PosTeam_p = 0;
    var PosL1g = 0;
    var PosL2g = 0;
    var PosL3g = 0;
    var PosTeam_g = 0;
    var PosPP1g = 0;
    var PosPP1p = 0;
    var PosSH1p = 0;
    var PosSH1g = 0;
    var PosPP2g = 0;
    var PosPP2p = 0;
    var PosSH2p = 0;
    var PosSH2g = 0;

    // Ball on att/def zone by line/team period/game (in counters)

    var Def1Z1p = 0;
    var Def1Z2p = 0;
    var Def1Z3p = 0;
    var Def1ZTeam_p = 0;
    var Att1Z1p = 0;
    var Att1Z2p = 0;
    var Att1Z3p = 0;
    var Att1ZTeam_p = 0;
    var Def1Z1g = 0;
    var Def1Z2g = 0;
    var Def1Z3g = 0;
    var Def1ZTeam_g = 0;
    var Att1Z1g = 0;
    var Att1Z2g = 0;
    var Att1Z3g = 0;
    var Att1ZTeam_g = 0;
    var Def1ZPP1p = 0;
    var Def1ZPP1g = 0;
    var Att1ZPP1p = 0;
    var Att1ZPP1g = 0;
    var Def1ZSH1p = 0;
    var Def1ZSH1g = 0;
    var Att1ZSH1p = 0;
    var Att1ZSH1g = 0;
    var Def1ZPP2p = 0;
    var Def1ZPP2g = 0;
    var Att1ZPP2p = 0;
    var Att1ZPP2g = 0;
    var Def1ZSH2p = 0;
    var Def1ZSH2g = 0;
    var Att1ZSH2p = 0;
    var Att1ZSH2g = 0;
    
    var Def2Z1p = 0;
    var Def2Z2p = 0;
    var Def2Z3p = 0;
    var Def2ZTeam_p = 0;
    var Att2Z1p = 0;
    var Att2Z2p = 0;
    var Att2Z3p = 0;
    var Att2ZTeam_p = 0;
    var Def2Z1g = 0;
    var Def2Z2g = 0;
    var Def2Z3g = 0;
    var Def2ZTeam_g = 0;
    var Att2Z1g = 0;
    var Att2Z2g = 0;
    var Att2Z3g = 0;
    var Att2ZTeam_g = 0;
    var Def2ZPP1p = 0;
    var Def2ZPP1g = 0;
    var Att2ZPP1p = 0;
    var Att2ZPP1g = 0;
    var Def2ZSH1p = 0;
    var Def2ZSH1g = 0;
    var Att2ZSH1p = 0;
    var Att2ZSH1g = 0;
    var Def2ZPP2p = 0;
    var Def2ZPP2g = 0;
    var Att2ZPP2p = 0;
    var Att2ZPP2g = 0;
    var Def2ZSH2p = 0;
    var Def2ZSH2g = 0;
    var Att2ZSH2p = 0;
    var Att2ZSH2g = 0;

    // Arrays for easy access to variables

    var Toc_p = [TocL1p, TocL2p, TocL3p, TocPP1p, TocPP2p, TocSH1p, TocSH2p, TocTeam_p];
    var Toc_g = [TocL1g, TocL2g, TocL3g, TocPP1g, TocPP2g, TocSH1g, TocSH2g, TocTeam_g];
    var Pos_g = [PosL1p, PosL2p, PosL3p, PosPP1p, PosPP2p, PosSH1p, PosSH2p, PosTeam_p];
    var Pos_p = [PosL1g, PosL2g, PosL3g, PosPP1g, PosPP2g, PosSH1g, PosSH2g, PosTeam_g];
    var Att1_p = [Att1Z1p, Att1Z2p, Att1Z3p, Att1ZPP1p, Att1ZPP2p, Att1ZSH1p, Att1ZSH2p, Att1ZTeam_p];
    var Att1_g = [Att1Z1g, Att1Z2g, Att1Z3g, Att1ZPP1g, Att1ZPP2g, Att1ZSH1g, Att1ZSH2g, Att1ZTeam_g];
    var Def1_p = [Def1Z1p, Def1Z2p, Def1Z3p, Def1ZPP1p, Def1ZPP2p, Def1ZSH1p, Def1ZSH2p, Def1ZTeam_p];
    var Def1_g = [Def1Z1g, Def1Z2g, Def1Z3g, Def1ZPP1g, Def1ZPP2g, Def1ZSH1g, Def1ZSH2g, Def1ZTeam_g];
    var Att2_p = [Att2Z1p, Att2Z2p, Att2Z3p, Att2ZPP1p, Att2ZPP2p, Att2ZSH1p, Att2ZSH2p, Att2ZTeam_p];
    var Att2_g = [Att2Z1g, Att2Z2g, Att2Z3g, Att2ZPP1g, Att2ZPP2g, Att2ZSH1g, Att2ZSH2g, Att2ZTeam_g];
    var Def2_p = [Def2Z1p, Def2Z2p, Def2Z3p, Def2ZPP1p, Def2ZPP2p, Def2ZSH1p, Def2ZSH2p, Def2ZTeam_p];
    var Def2_g = [Def2Z1g, Def2Z2g, Def2Z3g, Def2ZPP1g, Def2ZPP2g, Def2ZSH1g, Def2ZSH2g, Def2ZTeam_g];

    // html id myCanvas to variable
    var cnvs = document.getElementById("myCanvas");
    // html id shotmenu to variable
    var menu = document.getElementById("shotmenu");

    // html ids to variables
    // Shots/goals/penalties for/against, Fenwick/ba, plusminus by line/team and period/game

    var sfL1p = document.getElementById("sfL1");
    var saL1p = document.getElementById("saL1");
    var bfL1p = document.getElementById("bfL1");
    var baL1p = document.getElementById("baL1");
    var gfL1p = document.getElementById("gfL1");
    var gaL1p = document.getElementById("gaL1");
    var pmL1p = document.getElementById("pmL1");
    var sfL2p = document.getElementById("sfL2");
    var saL2p = document.getElementById("saL2");
    var bfL2p = document.getElementById("bfL2");
    var baL2p = document.getElementById("baL2");
    var gfL2p = document.getElementById("gfL2");
    var gaL2p = document.getElementById("gaL2");
    var pmL2p = document.getElementById("pmL2");
    var sfL3p = document.getElementById("sfL3");
    var saL3p = document.getElementById("saL3");
    var bfL3p = document.getElementById("bfL3");
    var baL3p = document.getElementById("baL3");
    var gfL3p = document.getElementById("gfL3");
    var gaL3p = document.getElementById("gaL3");
    var pmL3p = document.getElementById("pmL3");
    var sfPP1p = document.getElementById("sfPP1");
    var saPP1p = document.getElementById("saPP1");
    var bfPP1p = document.getElementById("bfPP1");
    var baPP1p = document.getElementById("baPP1");
    var gfPP1p = document.getElementById("gfPP1");
    var gaPP1p = document.getElementById("gaPP1");
    var pmPP1p = document.getElementById("pmPP1");
    var sfPP2p = document.getElementById("sfPP2");
    var saPP2p = document.getElementById("saPP2");
    var bfPP2p = document.getElementById("bfPP2");
    var baPP2p = document.getElementById("baPP2");
    var gfPP2p = document.getElementById("gfPP2");
    var gaPP2p = document.getElementById("gaPP2");
    var pmPP2p = document.getElementById("pmPP2");
    var sfSH1p = document.getElementById("sfSH1");
    var saSH1p = document.getElementById("saSH1");
    var bfSH1p = document.getElementById("bfSH1");
    var baSH1p = document.getElementById("baSH1");
    var gfSH1p = document.getElementById("gfSH1");
    var gaSH1p = document.getElementById("gaSH1");
    var pmSH1p = document.getElementById("pmSH1");
    var sfSH2p = document.getElementById("sfSH2");
    var saSH2p = document.getElementById("saSH2");
    var bfSH2p = document.getElementById("bfSH2");
    var baSH2p = document.getElementById("baSH2");
    var gfSH2p = document.getElementById("gfSH2");
    var gaSH2p = document.getElementById("gaSH2");
    var pmSH2p = document.getElementById("pmSH2");
    var sfTeamp = document.getElementById("sfTeam");
    var saTeamp = document.getElementById("saTeam");
    var bfTeamp = document.getElementById("bfTeam");
    var baTeamp = document.getElementById("baTeam");
    var gfTeamp = document.getElementById("gfTeam");
    var gaTeamp = document.getElementById("gaTeam");
    var pmTeamp = document.getElementById("pmTeam");

    // html ids to variables
    // Possession/Time on Court/AttZone by line/team period/game

    var pL1p = document.getElementById("pL1");
    var pL2p = document.getElementById("pL2");
    var pL3p = document.getElementById("pL3");
    var pPP1p = document.getElementById("pPP1");
    var pPP2p = document.getElementById("pPP2");
    var pSH1p = document.getElementById("pSH1");
    var pSH2p = document.getElementById("pSH2");
    var pTeamp = document.getElementById("pTeam");
    var tocL1p = document.getElementById("tocL1");
    var tocL2p = document.getElementById("tocL2");
    var tocL3p = document.getElementById("tocL3");
    var tocPP1p = document.getElementById("tocPP1");
    var tocPP2p = document.getElementById("tocPP2");
    var tocSH1p = document.getElementById("tocSH1");
    var tocSH2p = document.getElementById("tocSH2");
    var tocTeamp = document.getElementById("tocTeam");
    var attz1L1p = document.getElementById("attz1L1");
    var attz1L2p = document.getElementById("attz1L2");
    var attz1L3p = document.getElementById("attz1L3");
    var attz1PP1p = document.getElementById("attz1PP1");
    var attz1PP2p = document.getElementById("attz1PP2");
    var attz1SH1p = document.getElementById("attz1SH1");
    var attz1SH2p = document.getElementById("attz1SH2");
    var attz1Teamp = document.getElementById("attz1Team");
    var defz1L1p = document.getElementById("defz1L1");
    var defz1L2p = document.getElementById("defz1L2");
    var defz1L3p = document.getElementById("defz1L3");
    var defz1PP1p = document.getElementById("defz1PP1");
    var defz1PP2p = document.getElementById("defz1PP2");
    var defz1SH1p = document.getElementById("defz1SH1");
    var defz1SH2p = document.getElementById("defz1SH2");
    var defz1Teamp = document.getElementById("defz1Team");
    var attz2L1p = document.getElementById("attz2L1");
    var attz2L2p = document.getElementById("attz2L2");
    var attz2L3p = document.getElementById("attz2L3");
    var attz2PP1p = document.getElementById("attz2PP1");
    var attz2PP2p = document.getElementById("attz2PP2");
    var attz2SH1p = document.getElementById("attz2SH1");
    var attz2SH2p = document.getElementById("attz2SH2");
    var attz2Teamp = document.getElementById("attz2Team");
    var defz2L1p = document.getElementById("defz2L1");
    var defz2L2p = document.getElementById("defz2L2");
    var defz2L3p = document.getElementById("defz2L3");
    var defz2PP1p = document.getElementById("defz2PP1");
    var defz2PP2p = document.getElementById("defz2PP2");
    var defz2SH1p = document.getElementById("defz2SH1");
    var defz2SH2p = document.getElementById("defz2SH2");
    var defz2Teamp = document.getElementById("defz2Team");

    // html ids to variables
    // Shots/goals/penalties for/against, Fenwick/ba, plusminus by line/team period/game

    var sfL1g = document.getElementById("sfL1g");
    var saL1g = document.getElementById("saL1g");
    var bfL1g = document.getElementById("bfL1g");
    var baL1g = document.getElementById("baL1g");
    var gfL1g = document.getElementById("gfL1g");
    var gaL1g = document.getElementById("gaL1g");
    var pmL1g = document.getElementById("pmL1g");
    var sfL2g = document.getElementById("sfL2g");
    var saL2g = document.getElementById("saL2g");
    var bfL2g = document.getElementById("bfL2g");
    var baL2g = document.getElementById("baL2g");
    var gfL2g = document.getElementById("gfL2g");
    var gaL2g = document.getElementById("gaL2g");
    var pmL2g = document.getElementById("pmL2g");
    var sfL3g = document.getElementById("sfL3g");
    var saL3g = document.getElementById("saL3g");
    var bfL3g = document.getElementById("bfL3g");
    var baL3g = document.getElementById("baL3g");
    var gfL3g = document.getElementById("gfL3g");
    var gaL3g = document.getElementById("gaL3g");
    var pmL3g = document.getElementById("pmL3g");
    var sfPP1g = document.getElementById("sfPP1g");
    var saPP1g = document.getElementById("saPP1g");
    var bfPP1g = document.getElementById("bfPP1g");
    var baPP1g = document.getElementById("baPP1g");
    var gfPP1g = document.getElementById("gfPP1g");
    var gaPP1g = document.getElementById("gaPP1g");
    var pmPP1g = document.getElementById("pmPP1g");
    var sfPP2g = document.getElementById("sfPP2g");
    var saPP2g = document.getElementById("saPP2g");
    var bfPP2g = document.getElementById("bfPP2g");
    var baPP2g = document.getElementById("baPP2g");
    var gfPP2g = document.getElementById("gfPP2g");
    var gaPP2g = document.getElementById("gaPP2g");
    var pmPP2g = document.getElementById("pmPP2g");
    var sfSH1g = document.getElementById("sfSH1g");
    var saSH1g = document.getElementById("saSH1g");
    var bfSH1g = document.getElementById("bfSH1g");
    var baSH1g = document.getElementById("baSH1g");
    var gfSH1g = document.getElementById("gfSH1g");
    var gaSH1g = document.getElementById("gaSH1g");
    var pmSH1g = document.getElementById("pmSH1g");
    var sfSH2g = document.getElementById("sfSH2g");
    var saSH2g = document.getElementById("saSH2g");
    var bfSH2g = document.getElementById("bfSH2g");
    var baSH2g = document.getElementById("baSH2g");
    var gfSH2g = document.getElementById("gfSH2g");
    var gaSH2g = document.getElementById("gaSH2g");
    var pmSH2g = document.getElementById("pmSH2g");
    var sfTeamg = document.getElementById("sfTeamg");
    var saTeamg = document.getElementById("saTeamg");
    var bfTeamg = document.getElementById("bfTeamg");
    var baTeamg = document.getElementById("baTeamg");
    var gfTeamg = document.getElementById("gfTeamg");
    var gaTeamg = document.getElementById("gaTeamg");
    var pmTeamg = document.getElementById("pmTeamg");
    var pL1g = document.getElementById("pL1g");
    var pL2g = document.getElementById("pL2g");
    var pL3g = document.getElementById("pL3g");
    var pPP1g = document.getElementById("pPP1g");
    var pPP2g = document.getElementById("pPP2g");
    var pSH1g = document.getElementById("pSH1g");
    var pSH2g = document.getElementById("pSH2g");
    var pTeamg = document.getElementById("pTeamg");
    var tocL1g = document.getElementById("tocL1g");
    var tocL2g = document.getElementById("tocL2g");
    var tocL3g = document.getElementById("tocL3g");
    var tocPP1g = document.getElementById("tocPP1g");
    var tocPP2g = document.getElementById("tocPP2g");
    var tocSH1g = document.getElementById("tocSH1g");
    var tocSH2g = document.getElementById("tocSH2g");
    var tocTeamg = document.getElementById("tocTeamg");
    var attz1L1g = document.getElementById("attz1L1g");
    var attz1L2g = document.getElementById("attz1L2g");
    var attz1L3g = document.getElementById("attz1L3g");
    var attz1PP1g = document.getElementById("attz1PP1g");
    var attz1PP2g = document.getElementById("attz1PP2g");
    var attz1SH1g = document.getElementById("attz1SH1g");
    var attz1SH2g = document.getElementById("attz1SH2g");
    var attz1Teamg = document.getElementById("attz1Teamg");
    var defz1L1g = document.getElementById("defz1L1g");
    var defz1L2g = document.getElementById("defz1L2g");
    var defz1L3g = document.getElementById("defz1L3g");
    var defz1PP1g = document.getElementById("defz1PP1g");
    var defz1PP2g = document.getElementById("defz1PP2g");
    var defz1SH1g = document.getElementById("defz1SH1g");
    var defz1SH2g = document.getElementById("defz1SH2g");
    var defz1Teamg = document.getElementById("defz1Teamg");
    var attz2L1g = document.getElementById("attz2L1g");
    var attz2L2g = document.getElementById("attz2L2g");
    var attz2L3g = document.getElementById("attz2L3g");
    var attz2PP1g = document.getElementById("attz2PP1g");
    var attz2PP2g = document.getElementById("attz2PP2g");
    var attz2SH1g = document.getElementById("attz2SH1g");
    var attz2SH2g = document.getElementById("attz2SH2g");
    var attz2Teamg = document.getElementById("attz2Teamg");
    var defz2L1g = document.getElementById("defz2L1g");
    var defz2L2g = document.getElementById("defz2L2g");
    var defz2L3g = document.getElementById("defz2L3g");
    var defz2PP1g = document.getElementById("defz2PP1g");
    var defz2PP2g = document.getElementById("defz2PP2g");
    var defz2SH1g = document.getElementById("defz2SH1g");
    var defz2SH2g = document.getElementById("defz2SH2g");
    var defz2Teamg = document.getElementById("defz2Teamg");

    // Arrays for easy access to variables

    var sf_p = [sfL1p, sfL2p, sfL3p, sfPP1p, sfPP2p, sfSH1p, sfSH2p, sfTeamp];
    var sa_p = [saL1p, saL2p, saL3p, saPP1p, saPP2p, saSH1p, saSH2p, saTeamp];
    var gf_p = [gfL1p, gfL2p, gfL3p, gfPP1p, gfPP2p, gfSH1p, gfSH2p, gfTeamp];
    var ga_p = [gaL1p, gaL2p, gaL3p, gaPP1p, gaPP2p, gaSH1p, gaSH2p, gaTeamp];
    var pm_p = [pmL1p, pmL2p, pmL3p, pmPP1p, pmPP2p, pmSH1p, pmSH2p, pmTeamp];
    var bf_p = [bfL1p, bfL2p, bfL3p, bfPP1p, bfPP2p, bfSH1p, bfSH2p, bfTeamp];
    var ba_p = [baL1p, baL2p, baL3p, baPP1p, baPP2p, baSH1p, baSH2p, baTeamp];
    var p_p = [pL1p, pL2p, pL3p, pPP1p, pPP2p, pSH1p, pSH2p, pTeamp];
    var toc_p = [tocL1p, tocL2p, tocL3p, tocPP1p, tocPP2p, tocSH1p, tocSH2p, tocTeamp];
    var attz1_p = [attz1L1p, attz1L2p, attz1L3p, attz1PP1p, attz1PP2p, attz1SH1p, attz1SH2p, attz1Teamp];
    var defz1_p = [defz1L1p, defz1L2p, defz1L3p, defz1PP1p, defz1PP2p, defz1SH1p, defz1SH2p, defz1Teamp];
    var attz2_p = [attz2L1p, attz2L2p, attz2L3p, attz2PP1p, attz2PP2p, attz2SH1p, attz2SH2p, attz2Teamp];
    var defz2_p = [defz2L1p, defz2L2p, defz2L3p, defz2PP1p, defz2PP2p, defz2SH1p, defz2SH2p, defz2Teamp];
    
    var sf_g = [sfL1g, sfL2g, sfL3g, sfPP1g, sfPP2g, sfSH1g, sfSH2g, sfTeamg];
    var sa_g = [saL1g, saL2g, saL3g, saPP1g, saPP2g, saSH1g, saSH2g, saTeamg];
    var gf_g = [gfL1g, gfL2g, gfL3g, gfPP1g, gfPP2g, gfSH1g, gfSH2g, gfTeamg];
    var ga_g = [gaL1g, gaL2g, gaL3g, gaPP1g, gaPP2g, gaSH1g, gaSH2g, gaTeamg];
    var pm_g = [pmL1g, pmL2g, pmL3g, pmPP1g, pmPP2g, pmSH1g, pmSH2g, pmTeamg];
    var bf_g = [bfL1g, bfL2g, bfL3g, bfPP1g, bfPP2g, bfSH1g, bfSH2g, bfTeamg];
    var ba_g = [baL1g, baL2g, baL3g, baPP1g, baPP2g, baSH1g, baSH2g, baTeamg];
    var p_g = [pL1g, pL2g, pL3g, pPP1g, pPP2g, pSH1g, pSH2g, pTeamg];
    var toc_g = [tocL1g, tocL2g, tocL3g, tocPP1g, tocPP2g, tocSH1g, tocSH2g, tocTeamg];
    var attz1_g = [attz1L1g, attz1L2g, attz1L3g, attz1PP1g, attz1PP2g, attz1SH1g, attz1SH2g, attz1Teamg];
    var defz1_g = [defz1L1g, defz1L2g, defz1L3g, defz1PP1g, defz1PP2g, defz1SH1g, defz1SH2g, defz1Teamg];
    var attz2_g = [attz2L1g, attz2L2g, attz2L3g, attz2PP1g, attz2PP2g, attz2SH1g, attz2SH2g, attz2Teamg];
    var defz2_g = [defz2L1g, defz2L2g, defz2L3g, defz2PP1g, defz2PP2g, defz2SH1g, defz2SH2g, defz2Teamg];

    // Load and draw the shot map image when the html-page is loaded
    window.onload = function() {
    var ctx = cnvs.getContext("2d");
    ctx.drawImage(myImg,0,0,284,200);
    }

    // When the change team order button is changed, the teams switch sides
    function ChangeOrder() {
        if (Order == 1) { // Team 1 is moved as the right one, defence zone on the right
            document.getElementById("TeamL").innerHTML = "Team 2";
            document.getElementById("TeamR").innerHTML = "Team 1";
            document.getElementById("ZoneL").innerHTML = "Attack";
            document.getElementById("ZoneR").innerHTML = "Defence";
            Order = 2;
        }
        else { // Team 1 is moved as the left one, defence zone on the left
            document.getElementById("TeamL").innerHTML = "Team 1";
            document.getElementById("TeamR").innerHTML = "Team 2";
            document.getElementById("ZoneL").innerHTML = "Defence";
            document.getElementById("ZoneR").innerHTML = "Attack";
            Order = 1;
        }
    }

    // When the ball team left button is pressed the button colors and the variable are changed
    function BallTeamL() {
        document.getElementById("TeamR").style.background='#4CAF50';
        document.getElementById("TeamL").style.background='#555555';
        if (Order == 1) {
            Ball_pos = 1;
        } else {Ball_pos = 2;}
    }

    // When the ball team right button is pressed
    function BallTeamR() {
        document.getElementById("TeamR").style.background='#555555';
        document.getElementById("TeamL").style.background='#4CAF50';
        if (Order == 1) {
            Ball_pos = 2;
        } else {Ball_pos = 1;}
    }
    // When the right ball zone button is pressed
    function BallZoneR() {
        document.getElementById("ZoneR").style.background='#555555';
        document.getElementById("ZoneL").style.background='#4CAF50';
        if (Order == 1) {
            Ball_zone = 2;
        } else {Ball_zone = 1;}
    }
    // When the left ball zone button is pressed
    function BallZoneL() {
        document.getElementById("ZoneR").style.background='#4CAF50';
        document.getElementById("ZoneL").style.background='#555555';
        if (Order == 2) {
            Ball_zone = 2;
        } else {Ball_zone = 1;}
    }
    // When the line is changed by pressing any of the line on court buttons except the one that is on
    function Line_change(line) {
        console.log(lines); // debugging
        document.getElementById(lines[line_on-1]).style.background='#4CAF50';
        document.getElementById(lines[line-1]).style.background='#555555';
        line_on = line;
        console.log(line_on); // debugging
    }
    // Start game or start/stop game clock
    function Start() {
        // If the game has not started
        if (started == 0) {   // Start game and disable teams etc.
            var r = confirm("Do you want to start the game,\n changing teams will be disabled?");
            if (r == true) {
                document.getElementById("home_teams").disabled = true;
                document.getElementById("away_teams").disabled = true;
                document.getElementById("period").disabled = false;
                document.getElementById("reset").disabled = false;
                started = 1;
            } else {
            }
        }
        // Game has already started, then start/stop the game clock
        else {
            if (is_on == 0) {    // Start game clock
               document.getElementById("start").innerHTML = "Stop";
               document.getElementById("start").style.background='#555555';
               is_on = 1;
               Counter();
            }
            else if (is_on == 1) {  // Stop game clock
                document.getElementById("start").innerHTML = "Start";
                document.getElementById("start").style.background='#4CAF50';
                is_on = 0;
            }
        }
    }
    // Press the Reset button
    function Reset() {

    }
    // Press the Period button
    function Period() {
        var r = confirm("Changing period will reset clock and statistics,\nand save data, are you sure?");
            if (r == true) {
                periodN++
                counter = 1;
                document.getElementById("periodNr").innerHTML = "Period " + periodN;
                document.getElementById("label").innerHTML = "00:00:00";

                var ctx = cnvs.getContext("2d");
                ctx.drawImage(myImg,0,0,284,200);

                for (let i = 0; i < 8; i++) {

                    sf_p[i].innerHTML = 0;
                    sa_p[i].innerHTML = 0;
                    gf_p[i].innerHTML = 0;
                    ga_p[i].innerHTML = 0;
                    pm_p[i].innerHTML = 0;
                    bf_p[i].innerHTML = 0;
                    ba_p[i].innerHTML = 0;

                    Pos_p[i] = 0;
                    Def1_p[i] = 0;
                    Att1_p[i] = 0;
                    Def2_p[i] = 0;
                    Att2_p[i] = 0;
                    Toc_p[i] = 0;

                    p_p[i].innerHTML = 0;
                    toc_p[i].innerHTML = "00:00";
                    attz1_p[i].innerHTML = 0;
                    defz1_p[i].innerHTML = 0;
                    attz2_p[i].innerHTML = 0;
                    defz2_p[i].innerHTML = 0;

                }

            } else {
            }
    }
    function Counter() {
        Count();
    }

    function Count() {
         if (is_on == 1) {
             var date = new Date(counter * 1000);
             var display = date.toISOString().substr(11, 8);
             document.getElementById("label").innerHTML = display;

             Toc_p[line_on - 1]++;
             Toc_g[line_on - 1]++;
             Toc_p[7]++;
             Toc_g[7]++;

             if (Ball_pos == 1) {
                Pos_p[line_on - 1]++;
                Pos_g[line_on - 1]++;
                Pos_g[7]++;
                Pos_p[7]++;
                
                if (Ball_zone == 1) { // Ball Team 1 Def Zone
                    Def1_p[line_on - 1]++;
                    Def1_g[line_on - 1]++;
                    Def1_p[7]++;
                    Def1_g[7]++;
                }
                
                if (Ball_zone == 2) { // Ball Team 1 Att Zone
                    Att1_p[line_on - 1]++;
                    Att1_g[line_on - 1]++;
                    Att1_p[7]++;
                    Att1_g[7]++;
                }
             }
             else {
             
                if (Ball_zone == 1) { // Ball Team 2 Def Zone
                    Def2_p[line_on - 1]++;
                    Def2_g[line_on - 1]++;
                    Def2_p[7]++;
                    Def2_g[7]++;
                }
                
                if (Ball_zone == 2) { // Ball Team 2 Att Zone
                    Att2_p[line_on - 1]++;
                    Att2_g[line_on - 1]++;
                    Att2_p[7]++;
                    Att2_g[7]++;
                }
             }
             
             p_p[line_on - 1].innerHTML = Math.round(100 * Pos_p[line_on - 1] / Toc_p[line_on - 1]);
             p_p[7].innerHTML = Math.round(100 * Pos_p[7] / counter);
             
             p_g[line_on - 1].innerHTML = Math.round(100 * Pos_g[line_on - 1] / Toc_g[line_on - 1]);
             p_g[7].innerHTML = Math.round(100 * Pos_g[7] / gameCounter);

             var toc = new Date(Toc_p[line_on - 1] * 1000);
             var d = toc.toISOString().substr(14, 5);
             toc_p[line_on - 1].innerHTML = d;
             
             var toc = new Date(Toc_g[line_on - 1] * 1000);
             var d = toc.toISOString().substr(14, 5);
             toc_g[line_on - 1].innerHTML = d;

             var toc = new Date(Toc_p[7] * 1000);
             var d = toc.toISOString().substr(14, 5);
             toc_p[7].innerHTML = d;

             var toc = new Date(Toc_g[7] * 1000);
             var d = toc.toISOString().substr(14, 5);
             toc_g[7].innerHTML = d;
             
             attz1_p[line_on - 1].innerHTML = Math.round(100 * Att1_p[line_on - 1] / Toc_p[line_on - 1]);
             attz1_p[7].innerHTML = Math.round(100 * Att1_p[7] / counter);
             
             attz1_g[line_on - 1].innerHTML = Math.round(100 * Att1_g[line_on - 1] / Toc_g[line_on - 1]);
             attz1_g[7].innerHTML = Math.round(100 * Att1_g[7] / gameCounter);
             
             attz2_p[line_on - 1].innerHTML = Math.round(100 * Att2_p[line_on - 1] / Toc_p[line_on - 1]);
             attz2_p[7].innerHTML = Math.round(100 * Att2_p[7] / counter);
             
             attz2_g[line_on - 1].innerHTML = Math.round(100 * Att2_g[line_on - 1] / Toc_g[line_on - 1]);
             attz2_g[7].innerHTML = Math.round(100 * Att2_g[7] / gameCounter);
             
             defz1_p[line_on - 1].innerHTML = Math.round(100 * Def1_p[line_on - 1] / Toc_p[line_on - 1]);
             defz1_p[7].innerHTML = Math.round(100 * Def1_p[7] / counter);
             
             defz1_g[line_on - 1].innerHTML = Math.round(100 * Def1_g[line_on - 1] / Toc_g[line_on - 1]);
             defz1_g[7].innerHTML = Math.round(100 * Def1_g[7] / gameCounter);
             
             defz2_p[line_on - 1].innerHTML = Math.round(100 * Def2_p[line_on - 1] / Toc_p[line_on - 1]);
             defz2_p[7].innerHTML = Math.round(100 * Def2_p[7] / counter);
             
             defz2_g[line_on - 1].innerHTML = Math.round(100 * Def2_g[line_on - 1] / Toc_g[line_on - 1]);
             defz2_g[7].innerHTML = Math.round(100 * Def2_g[7] / gameCounter);

             counter++;
             gameCounter++;
             console.log(counter);
             t = setTimeout(function(){ Count() }, 1000);
         }
    }

    function FindPosition(oElement)
    {
      if(typeof( oElement.offsetParent ) != "undefined")
      {
        for(var posX = 0, posY = 0; oElement; oElement = oElement.offsetParent)
        {
          posX += oElement.offsetLeft;
          posY += oElement.offsetTop;
        }
          return [ posX, posY ];
        }
        else
        {
          return [ oElement.x, oElement.y ];
        }
    }

    function GetCoordinates(e)
    {
        var ImgPos;
        ImgPos = FindPosition(cnvs);
        if (!e) var e = window.event;
        if (e.pageX || e.pageY)
        {
        PosX = e.pageX;
        PosY = e.pageY;
        }
        else if (e.clientX || e.clientY)
        {
          PosX = e.clientX + document.body.scrollLeft
            + document.documentElement.scrollLeft;
          PosY = e.clientY + document.body.scrollTop
            + document.documentElement.scrollTop;
        }

        menu.style.display = "block";
        menu.style.left = PosX + "px";
        menu.style.top = PosY + "px";

        PosX = PosX - ImgPos[0];
        PosY = PosY - ImgPos[1];
    }

    function shotMissed() {
        Draw(PosX,PosY,1);
    }

    function shotBlocked() {
        Draw(PosX,PosY,2);
    }

    function shotSaved() {
        Draw(PosX,PosY,3);
    }

    function shotGoal() {
        Draw(PosX,PosY,4);
    }

    function Draw(x,y,type)
    {
        var ctx = cnvs.getContext("2d");
        menu.style.display = "none";
        ctx.font = "12px Arial";

        if (Ball_pos == 1) {
            ctx.fillStyle = "blue";
            if (type == 1) {    // Shot Missed
                ctx.fillText("M", x, y);
                
                sf_p[line_on - 1].innerHTML++;
                sf_p[7].innerHTML++;
                sf_g[line_on - 1].innerHTML++;
                sf_g[7].innerHTML++;
            }
            else if (type == 2) {   // Shot Blocked
                ctx.fillText("B", x, y);
                
                sf_p[line_on - 1].innerHTML++;
                sf_p[7].innerHTML++;
                sf_g[line_on - 1].innerHTML++;
                sf_g[7].innerHTML++;

                ba_g[line_on - 1].innerHTML++;
                ba_g[7].innerHTML++;
                ba_p[line_on - 1].innerHTML++;
                ba_p[7].innerHTML++;
            }
            else if (type == 3) {   // Shot Saved
                ctx.fillText("S", x, y);
                
                sf_p[line_on - 1].innerHTML++;
                sf_p[7].innerHTML++;
                sf_g[line_on - 1].innerHTML++;
                sf_g[7].innerHTML++;
            }
            else if (type == 4) {   // Shot Goal
                ctx.fillText("G", x, y);
                
                sf_p[line_on - 1].innerHTML++;
                gf_p[line_on - 1].innerHTML++;
                pm_p[line_on - 1].innerHTML++;
                sf_p[7].innerHTML++;
                gf_p[7].innerHTML++;
                pm_p[7].innerHTML++;
                
                sf_g[line_on - 1].innerHTML++;
                gf_g[line_on - 1].innerHTML++;
                pm_g[line_on - 1].innerHTML++;
                sf_g[7].innerHTML++;
                gf_g[7].innerHTML++;
                pm_g[7].innerHTML++;
            }
        }
        else if (Ball_pos == 2) {
            ctx.fillStyle = "red";
            if (type == 1) {    // Shot Missed
                ctx.fillText("M", x, y);
                
                sa_p[line_on - 1].innerHTML++;
                sa_p[7].innerHTML++;
                sa_g[line_on - 1].innerHTML++;
                sa_g[7].innerHTML++;
            }
            else if (type == 2) {   // Shot Blocked
                ctx.fillText("B", x, y);
                
                sa_p[line_on - 1].innerHTML++;
                bf_p[line_on - 1].innerHTML++;
                sa_p[7].innerHTML++;
                bf_p[7].innerHTML++;
                
                sa_g[line_on - 1].innerHTML++;
                bf_g[line_on - 1].innerHTML++;
                sa_g[7].innerHTML++;
                bf_g[7].innerHTML++;
            }
            else if (type == 3) {   // Shot Saved
                ctx.fillText("S", x, y);
                
                sa_p[line_on - 1].innerHTML++;
                sa_p[7].innerHTML++;
                
                sa_g[line_on - 1].innerHTML++;
                sa_g[7].innerHTML++;
            }
            else if (type == 4) {   // Shot Goal
                ctx.fillText("G", x, y);
                
                sa_p[line_on - 1].innerHTML++;
                ga_p[line_on - 1].innerHTML++;
                pm_p[line_on - 1].innerHTML--;
                sa_p[7].innerHTML++;
                ga_p[7].innerHTML++;
                pm_p[7].innerHTML--;
                
                sa_g[line_on - 1].innerHTML++;
                ga_g[line_on - 1].innerHTML++;
                pm_g[line_on - 1].innerHTML--;
                sa_g[7].innerHTML++;
                ga_g[7].innerHTML++;
                pm_g[7].innerHTML--;
            }
        }
    }

    function homeTeam() {
        console.log("Home Team changed");
    }

    function awayTeam() {
        console.log("Away Team changed");
    }

</script>

{% endblock %}